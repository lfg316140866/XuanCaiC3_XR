/**
 * Created with JetBrains WebStorm.
 * User: zachary
 * Date: 6/13/13
 * Time: 3:19 PM
 */
(function($) {
    $.fn.griMap = function(opts) {
        var _this = $(this);

        //!todo if opts is not a obj
        //convert string to obj that match the options
        if (opts) {
            $.fn.griMap.defaults.data = opts;
        }

        var opts = $.extend({}, $.fn.griMap.defaults, opts);

        var griMap = (function() {
            /**
             * options that map bases
             */
            var _options;

            /**
             * Meta data describe China Map
             * @type {Object}
             * @private
             */
            var _mapMeta = {
                width: 565,
                height: 475,
                shapes: {
                    heilongjiang: 'M464.838,96.639l6.787-1.19l2.854,5.241l4.285,3.095l2.856-1.188h2.386l4.285-2.501l3.094,3.094l2.024,0.357l5.357-2.023l3.813,2.023l1.666,4.288h2.857l1.43,1.904l3.689,4.049l1.426-0.833l-0.594-5.12l2.026-1.432l2.854,5.716l2.621,1.074l2.858,3.212l2.021-0.357l0.836-1.427l4.523-5.12l2.022,1.428l1.43-2.022l1.431,2.619l4.283,1.429h2.86l2.07,0.088l-1.238-2.113l-0.598-6.906l-5.115-7.978l2.855-2.857l2.616-4.883h9.646l1.785-1.665l-0.597-3.69l2.025-3.691l-0.596-2.024l0.832-3.451l-0.236-17.742l2.855-5.715l-3.214-3.692l0.595-2.261l-1.427-2.024l-3.69,1.429l-4.289,4.884l-4.283,2.023l-4.289,5.951l-10.598,3.692l-4.879-3.692l0.594-2.262l-2.5-3.689l-1.191-3.811l-4.047-0.239l-7.145-3.69l-2.859,1.071l-3.33-1.667l-4.887,0.834l-4.283-1.429l-2.621-3.69l-2.498-2.857l-0.951-2.857l-3.334-3.452l-2.026-3.099l-4.644-6.31l-1.428-3.69l-5.119-6.548l-1.432-3.454l-6.549-3.216l-4.287,1.429l-3.689-0.833l-8.336-1.668l-11.07,3.932l-2.024,1.786l2.262,3.096l-2.856,7.499l0.834,0.835l4.881,3.096l2.621-4.286l4.524,2.856l-0.235,2.022l1.664,5.119l2.854,3.218l5.717,0.833l1.668-1.787l3.451-0.477l6.547-5.476l8.576,6.31l-2.858,11.669l0.594,8.333v5.119l-2.26,1.191l-0.238,13.335l-0.597-0.476l-2.26-2.858h-1.192l-0.595,1.073c0,0-8.797,13.044-7.146,10.596c1.652-2.448-3.451,4.523-3.451,4.523l0.357,1.428l7.145,4.886l3.926-1.071l0.599,1.071l-0.834,1.189l-3.689,1.667l-0.359,3.214L464.838,96.639z',
                    jilin: 'M544.896,113.042l-2.07-0.088h-2.858l-4.285-1.431l-1.43-2.619l-1.431,2.024l-2.022-1.428l-4.523,5.12l-0.834,1.427l-2.022,0.357l-2.859-3.214l-2.621-1.072l-2.854-5.715l-2.027,1.431l0.594,5.12l-1.426,0.833l-3.689-4.05l-1.432-1.903h-2.854l-1.666-4.288l-3.813-2.023l-5.354,2.023l-2.025-0.357l-3.098-3.094l-4.285,2.5h-2.383l-2.857,1.191l-4.285-3.096l-2.854-5.24l-6.787,1.189l-2.621,3.099l-0.238,3.45l-7.502-2.023l-1.074,2.381l0.601,1.667l3.928,2.859v4.046l0.594,3.929l2.265,3.456l0.356,3.095l1.666,1.191l5.717-5.479l5.953,7.502v4.288l3.213,1.667l0.238-1.431l4.885,1.431l3.451,4.046l1.666-1.784l0.357-1.074l8.217,11.075l0.594,4.286l4.527,5.239l0.592,4.761l4.051-2.499l3.689-10.598l1.67-0.595l4.047,2.263l6.549-0.834l2.26-2.024l-3.092-4.763l0.832-1.191c0,0,7.84-2.611,6.072-2.022c-1.766,0.588,2.5-4.883,2.5-4.883l3.215-1.428l0.238-4.766l0.832-3.212l1.785-0.596l1.668,1.789l1.668,1.426l4.287-5.715l1.188-4.288L544.896,113.042z',
                    liaoning: 'M491.15,173.2l6.783-10.002l4.287-4.881l-0.595-4.763l-4.524-5.239l-0.594-4.286l-8.216-11.075l-0.358,1.074l-1.666,1.786l-3.453-4.05l-4.883-1.429l-0.236,1.429v2.264l-2.022,2.022l-4.047,4.05H467.1l-1.666,2.856h-1.789l-3.094,3.096h-1.787l-3.691,3.691l-2.262,0.596l-4.881,7.5l-3.096-4.644l-3.453-2.262l-1.666,1.667l1.903,10.002l-1.666,3.453l-1.668,5.12l4.763,3.215l2.621,0.238l3.45,4.881l2.5-1.429c0,0,2.857-2.881,4.05-4.882c1.192-2.002,4.049-6.788,4.049-6.788l6.787-1.429l4.287,4.286l-3.099,6.787l-4.049,6.311l3.688,2.62l-0.233,3.098l-2.857,2.855l0.597,1.19l4.881-2.619l7.143-9.407l10.836-6.072L491.15,173.2z',
                    hebei: 'M413.04,235.229l0.357-1.426l-1.783-3.453l6.902-12.5c0,0,8.725-7.9,6.313-5.718c-2.411,2.185,4.523-1.188,4.523-1.188l4.268-5.423l-1.647-1.125l-1.56-3.907l-3.319,1.286l-5.479-1.428l-0.237-1.428l-0.238-9.17l3.69-1.667l-0.419-1.563l-0.177-0.104l0.81-3.557l-5.094,2.128l0.832,1.905l0.178,1.424l0.18,1.433l-2.857,1.19l-1.785,1.667l-3.692-1.071l-4.881,0.834l-0.832-2.264l0.594-4.287l3.693-4.286l0.831-4.88l3.691-3.691l6.666,3.454h1.668l1.189,4.762l1.905,0.95l0.953,3.1l-0.356,2.024l4.047,2.854l0.594,2.264l3.338,1.428l8.332-4.523v-2.621l4.883-7.143l-3.45-4.881l-2.621-0.238l-4.763-3.218l1.668-5.118l-7.387-0.595l-3.213-4.765l0.357-2.619l-6.31-6.906l-4.051,2.026l-3.451,3.452l1.191,2.62l-0.834,1.667l-4.882,0.237l-2.264,2.022l-2.022-0.835l-2.021,2.026l-4.527,3.453l-2.024-1.43v-4.644l-1.666-0.832l-2.619,1.189l-3.096,6.547l-1.189,6.311l3.689,6.19l3.215,2.858v5.24l1.904,4.286l-0.834,4.764l-4.884,3.213l-2.26,7.382l4.049,4.645l2.857,5.717l-1.785,2.857l-0.477,3.928l-1.787,2.619l-0.834,2.859l2.621,3.446l11.43,1.431l4.524-1.787L413.04,235.229z',
                    shandong: 'M425.661,252.611l0.597-2.856l2.5-1.069l4.645,3.927h1.433l4.284-0.476l2.5-2.022l3.453,2.856l1.429-2.62l0.356-1.43l2.857-1.667l0.834-3.45l2.854-0.595l7.98-13.454l-1.429-2.264l1.429-1.427l1.666,0.595l2.619-1.429l1.432-3.094l6.545-6.073l5.121-1.666l2.381-2.266l-0.592-4.88l-3.457-0.355l-7.738,0.952l-5.356-2.62l-3.216,0.596l-7.977,10.239l-2.262,1.429l-5.117-2.263l-0.359-2.619l-1.069-4.523l-2.859-1.669l-4.643,1.073l-2.882-1.971l-4.266,5.423l-4.523,1.188c0,0-8.514,7.798-6.313,5.718c2.201-2.081-6.902,12.5-6.902,12.5l1.783,3.45l-0.357,1.431v1.666l0.957,1.429l2.261-1.669l3.69-0.834l-10.002,11.074v2.621l2.023,0.596l4.524,3.93l7.146-0.835L425.661,252.611z',
                    jiangsu: 'M483.646,282.616l-1.426,4.286l-1.898,2.251l-3.225,3.824l-4.879-0.835l-3.929-2.383l-2.383,1.19l-8.571-0.832l-0.238-3.454l-4.287-2.856l-1.428-2.618l2.02-2.264v-1.665v-2.267l5.121-0.594l0.24-2.023l-1.666-2.263l-2.621-0.355l-1.666,2.854l-4.287-0.831l-1.188-2.263l-2.857-1.666l0.955-6.074l-0.598-1.072l-2.859,0.479l-2.021-1.667l-5.118-1.429l-2.861-2.857l-6.307-2.621l0.592-2.856l2.5-1.069l4.645,3.927h1.433l4.284-0.476l2.5-2.022l3.453,2.856l1.427-2.62l0.358-1.43l2.857-1.667l0.834-3.45l2.854-0.597l7.148,4.881c0,0,3.365,0.754,5.117,2.025c1.754,1.271,9.766,16.313,9.766,16.313l-0.357,1.666l6.548,3.095l1.784,2.859l3.099,1.429l1.428,2.855l-2.023,0.951l-3.334-1.188h-4.645l-4.287-1.432l-1.666,1.432l3.932,1.188l3.813,1.669L483.646,282.616z',
                    zhejiang: 'M483.793,336.063l-6.455,2.276l-3.693-3.69l-2.498,3.215h-4.049l-1.666-3.454l-2.023-5.118l-3.692-0.596l-4.047-7.501l-2.619-3.69l1.903-1.818l0.716-0.685c0,0,6.241-8.84,4.286-6.07c-1.954,2.769-0.239-4.882-0.239-4.882l1.43-1.906l3.336-0.594l0.951-1.43l-1.189-2.263l1.666-2.382v-4.524l2.384-1.189l3.928,2.382l4.879,0.835l3.225-3.824l3.998,3.332l-1.744,1.324l-2.021,3.096l-3.217,0.952l-1.074,0.833l3.098,1.666l5.715-2.499l9.406,3.929l0.953,7.979h-3.809l-0.24,2.382l2.024,3.332l-1.784,2.024l2.022,3.214l-3.096,3.69l-1.43-1.787l-4.644,11.788L483.793,336.063z',
                    anhui: 'M423.637,253.208l2.024-0.597l6.312,2.621c0,0,1.768,2.299,2.861,2.856c1.092,0.557,5.118,1.43,5.118,1.43l2.021,1.667l2.858-0.479l0.599,1.072l-0.957,6.074l2.858,1.666l1.189,2.263l4.287,0.831l1.666-2.854l2.621,0.356l1.666,2.265l-0.24,2.021l-5.121,0.596v2.264v1.665l-2.021,2.265l1.43,2.618l4.287,2.856l0.237,3.454l8.572,0.832v4.525l-1.666,2.381l1.191,2.263l-0.951,1.43l-3.338,0.594l-1.428,1.906l0.235,4.882l-4.285,6.072l-0.715,0.683l-2.381-2.111H446.5l-2.498-2.855l-4.884,4.761l-1.786-0.834l2.026-3.69l-0.24-1.188l-1.786-0.479l-5.718,3.099l-5.356-10.241l1.666-3.214l-0.595-1.071l-2.858-0.952l-4.76-2.858l1.903-3.928l2.855-1.43l0.598-3.214l-1.07-5.716l-0.596-0.479l-2.856,2.86c0,0-5.978-4.647-4.287-3.453c1.69,1.192-3.217-4.049-3.217-4.049l3.217-2.261l0.834-4.05l2.021-1.431l-0.354-5.359l1.43-1.188l2.619,1.787l1.664,2.26l3.453-2.26l1.192-1.434l-0.598-2.617l-4.049-2.263L423.637,253.208z',
                    henan: 'M371.131,276.068l9.405,8.336l7.742,1.665l7.144-1.072l2.262,1.072l2.5-1.43l1.783,1.787l0.834,2.856l3.455,1.905h4.524l3.451,2.857l3.098-1.428l2.382,1.428l1.903-3.929l2.855-1.43l0.598-3.216l-1.07-5.715l-0.596-0.479l-2.856,2.86l-4.287-3.453l-3.218-4.049l3.218-2.263l0.834-4.048l2.021-1.431l-0.354-5.359l1.43-1.188l2.619,1.787l1.664,2.26l3.455-2.26l1.19-1.434l-0.598-2.617l-4.049-2.263l-0.834-2.619l-7.142,0.835l-4.524-3.93l-2.021-0.596v-2.621l10-11.074l-3.69,0.834l-2.261,1.669l-0.957-1.429v-1.666l-1.663-0.6l-4.525,1.785l-11.43-1.428l-0.597,9.408c0,0-6.604,5.169-5.479,4.287c1.129-0.884-7.381,1.429-7.381,1.429l-10.359,7.142l-8.215,2.264v1.43l7.738,11.666L371.131,276.068L371.131,276.068z',
                    shanxi: 'M363.393,259.519l8.217-2.265l10.357-7.142l7.381-1.431l5.477-4.287l0.599-9.405l-2.623-3.449l0.836-2.856l1.787-2.619l0.477-3.929l1.785-2.86l-2.859-5.713l-4.047-4.645l2.262-7.383l4.886-3.212l0.83-4.765l-1.904-4.286v-5.242l-3.215-2.854l-7.381,3.809l-1.191-1.189l-3.93,2.855l-3.213-0.235l-6.312,9.048h-1.906l-3.452,2.858l0.237,4.046l-1.67,3.452l-0.594,4.525l-3.096,4.884l3.334,6.905l-1.07,3.929l-2.619,4.286c0,0,4.146,18.996,3.689,16.903s-2.498,8.81-2.498,8.81L363.393,259.519z',
                    shaanxi: 'M363.393,259.519l-1.428-3.454l2.498-8.81l-3.689-16.903c0,0,3.262-5.777,2.619-4.286c-0.646,1.49,1.07-3.929,1.07-3.929l-3.334-6.905l3.096-4.884l0.594-4.525l1.67-3.452l-0.238-4.046l-1.432-1.074l-2.26,2.502l-6.072,0.356l-3.096,4.526l0.236,2.62l-0.593,1.665l-2.502,0.834l-9.406,13.454l-1.19-0.836l-2.617-0.594l-5.359,0.359l-1.789,2.499l-0.233,5.478l0.834,1.667l9.166,4.637l4.883,3.099l0.832,2.855l-2.619,3.691l1.431,4.286l-0.835,2.021l-6.784,0.6l-1.433,0.835l0.478,1.188v1.904l-5.355,0.596l-2.856-1.428h-3.691l-0.596,0.832l0.596,2.026l-1.789,2.022l-0.592,2.261l3.451,2.861l-2.5,5.117l1.071,2.619l-0.237,1.191h-4.052l-2.854,1.429l2.262,3.098l-1.43,4.048l2.383,0.478l0.238,2.617l2.021,0.237l7.386-1.427l1.43,0.593l0.354,2.025l3.099,0.835l6.547,3.216l3.69-1.434l8.097,2.857l1.666,2.26l4.051-0.829l-0.596-4.288l-0.834-1.191l0.834-3.451l4.286-2.021l1.068-1.668l-2.26-0.837l-2.5-0.593l-2.619-2.62l1.189-1.068h8.571h1.908l1.189,0.83l2.616-2.022v-3.454l-7.737-11.668L363.393,259.519L363.393,259.519z',
                    gansu: 'M196.462,200.108l-1.43-16.55l0.836-3.453l4.879-2.262c0,0,5.209-5.03,6.903-5.717c1.696-0.686,10.6-4.285,10.6-4.285l4.285-2.025v-4.047l1.905-2.262l1.788,0.237l7.144,1.192l-0.358,3.095l1.43,4.88l-0.834,7.978l6.072,8.929l3.097,2.026l4.883-3.812h10.237l2.623,0.953l1.429,2.264l-1.193,2.499l-5.714,4.645l0.597,2.261l6.549,4.882h2.618l0.834,1.07l-0.596,2.025l4.05,3.217l9.404,1.429l4.525-1.19l5.718-5.719l6.903,0.598l2.855,4.287l-1.664,3.929l0.475,2.382l-3.688,2.263l-1.668,2.024l0.596,4.763l6.545,4.646l2.875-0.653l7.725,9.458l1.668,7.145l-0.834,3.451l5.357,2.859v2.26l4.883,1.192h1.426v-4.05l3.693-0.595l0.951-4.763l-2.619-2.026l-2.025-2.021l0.834-9.166l2.023-1.071l3.453,1.43l1.432-0.598l0.834,1.667l9.166,4.639l4.883,3.1l0.832,2.856l-2.619,3.691l1.431,4.285l-0.834,2.021l-6.785,0.6l-1.433,0.833l0.478,1.191v1.903l-5.355,0.594l-2.856-1.428h-3.691l-0.596,0.834l0.596,2.024l-1.789,2.023l-0.592,2.262l3.449,2.857l-2.498,5.119l1.072,2.622l-0.238,1.188h-4.051l-2.854,1.435l2.26,3.091l-1.428,4.051l-4.287,1.07l0.357,2.023l-1.189,1.428l-7.383-0.596l-2.854-2.021l-0.601-4.525l-1.664-1.669l-2.62,1.669l-4.523-4.521l-3.455-2.385l-0.354-3.335l-1.074-2.619h-1.787l-7.144,3.096l0.356,3.454h-2.618l-4.287-4.288l-4.525-0.593l-1.786-2.499l1.431-2.86l2.617,2.5l3.097,0.954l2.62-2.025v-4.881l2.857-2.62l2.265-2.263l-1.073-2.856l5.716-4.522l0.832-7.147l-2.619-3.688l-1.429-6.071l-7.144-9.405l-3.692,1.431l-5.118-4.524l-6.907-4.287l-2.856-6.905l-5.359,2.023l-9.999-6.309l-4.883,2.616l-7.501-1.188l-5.714,3.452l-3.691,0.237l-5.715-3.451l-3.93-2.265L196.462,200.108z',
                    hubei: 'M356.486,329.29l1.787-4.048l5.119-4.287l4.881,2.026l3.096-2.026l-2.621-3.093l1.429-1.433l13.219,0.836l4.525,3.097l2.264,1.425l3.451-2.26l2.619-0.833l0.596,3.093h1.904l1.43-2.021l2.856-2.86l1.431,2.027v4.049l1.19,1.667l2.619,0.594l2.855-2.854l4.287-1.433l7.979-7.381l3.691,0.236l4.522-1.428l-5.358-10.24l1.668-3.214l-0.593-1.071l-2.862-0.952l-4.761-2.858l-2.381-1.427l-3.098,1.427l-3.451-2.854h-4.524l-3.455-1.907l-0.83-2.856l-1.787-1.786l-2.5,1.428L395.421,285c0,0-9.509,0.927-7.146,1.071c2.363,0.146-7.736-1.666-7.736-1.666l-9.407-8.334l-2.619,2.023l-1.188-0.831h-1.907h-8.572l-1.189,1.068l2.619,2.62l2.5,0.593l2.26,0.837l-1.067,1.668l-4.287,2.021l-0.834,3.451l0.834,1.191l0.596,4.288l2.5,0.238l2.619,3.452l1.07,6.548l-0.832,2.262l-1.666-0.594l-4.883,3.812l-8.336,1.429l-2.261,2.263l1.783,2.262l0.24,4.882l2.262,0.598L356.486,329.29z',
                    jiangxi: 'M408.279,325.242l3.336,6.549l0.355,3.452l-1.785,3.454l-2.502,2.024l-0.594,6.188l0.832,0.955l1.43-0.596l0.834,0.596v3.927l1.785,4.647l2.026,0.831l0.234,6.789l-1.193,4.642l1.193,2.021l2.266,2.265l5.474-1.429l1.071,2.022l-1.665,2.263l-2.859,4.287v1.07l1.67,1.192l11.43-4.525l4.047,2.263l1.191-1.19l-1.191-2.499l0.281-1.663l1.742-10.365l1.67-2.62l0.832-2.854l2.025-4.286l-1.072-1.668l0.238-3.691l4.881-5.475l-0.355-3.691l3.213-5.478l3.095,0.834l6.311-4.524l1.193-2.263l-4.049-7.501l-2.619-3.69l1.901-1.818l-2.381-2.111H446.5l-2.5-2.855l-4.884,4.762l-1.784-0.835l2.024-3.69l-0.24-1.188l-1.784-0.479l-5.716,3.099l-4.524,1.429l-3.689-0.238c0,0-9.709,9.669-7.979,7.381c1.731-2.287-4.287,1.433-4.287,1.433L408.279,325.242z',
                    fujian: 'M435.945,374.779c0,0,2.881-12.508,1.742-10.365c-1.137,2.144,1.672-2.62,1.672-2.62l0.83-2.854l2.023-4.286l-1.072-1.668l0.24-3.691l4.881-5.475l-0.357-3.691l3.215-5.478l3.095,0.834l6.311-4.524l1.193-2.26l3.69,0.593l2.025,5.118l1.666,3.454h4.047l2.498-3.215l3.693,3.69l6.454-2.276l-4.069,9.776l-2.385-1.192l-1.666,0.835l-0.238,0.954l2.262,2.501l-0.598,8.929l0.598,2.859l-0.598,0.834l-2.617-0.599l-1.668,1.667l1.191,2.384l-3.214,3.095l0.595,1.189l-3.097,1.665l0.478,2.264l-1.072,1.191h-4.285l-2.264,2.025l-0.357,0.832l2.023,1.428l-2.26,3.452l-2.859,3.691l-1.189-0.356l-3.1,3.216l-3.447-7.502l-3.098-3.929l-2.023,0.24l-1.43-1.072L435.945,374.779z',
                    hunan: 'M408.279,325.242l-2.619-0.594l-1.188-1.667v-4.05l-1.43-2.026l-2.857,2.86l-1.43,2.023h-1.904l-0.594-3.096l-2.621,0.833l-3.451,2.263l-2.264-1.428c0,0-2.666-2.521-4.525-3.097c-1.857-0.576-13.217-0.832-13.217-0.832l-1.43,1.429l2.62,3.093l-3.096,2.026l-4.883-2.026l-5.117,4.287l-1.787,4.05c0,0-0.19,6.479,0.357,9.405c0.551,2.926,2.5,10.002,2.5,10.002l-5.717,6.31l0.596,0.833l5.121-1.428l1.785,2.263l-1.429,7.144l2.857,5.121l2.856,0.832l2.857-3.931l1.43,3.099l0.834-0.238l4.523-4.288l1.191,0.24l2.021-1.073l3.693,1.073v4.048l2.856,0.595l-0.832,3.929l-2.623,4.29l-1.188,3.688h1.188l3.103-2.854l2.617,5.713l2.021-1.43h2.264l2.263-1.666v-3.45l1.188-1.072l2.859,0.235l4.879,2.264l0.834-1.667l-1.188-2.023l0.354-1.429l3.098-2.619l5.478,1.428l3.096-1.906l-1.193-2.021l1.193-4.642l-0.234-6.789l-2.026-0.831l-1.785-4.647v-3.927l-0.834-0.596l-1.43,0.596l-0.832-0.955l0.594-6.188l2.502-2.024l1.785-3.454l-0.355-3.452L408.279,325.242z',
                    guizhou: 'M313.622,349.296l-1.666,4.761l-2.856,0.951l-6.313-0.951l-1.43,1.429l-3.453-1.07l-3.094,4.286l1.428,1.43v2.856l1.431,2.501l6.309-1.906l1.908,1.667l-2.859,12.027l3.81,3.689l-1.188,6.907l3.688,0.238l4.051-3.695l1.668,1.073l7.737,3.216l1.429-0.832l0.235-2.622l1.433-1.429l10.955-7.144l1.903,2.265l6.668,2.021l3.689-4.883l1.668,1.192h2.619v-1.432l3.453-1.189v-1.071l1.43-1.428l0.832,0.237l3.453-3.452l-2.857-5.123l1.429-7.142l-1.785-2.263l-5.121,1.428l-0.596-0.834l5.717-6.309l-2.5-10.001l-3.81,2.855l-3.334-3.45l-3.215-4.29l-0.24-2.619l-2.26-0.477l-2.621,0.834l-4.287-2.024l-2.022,4.883l-3.691,0.239l-2.619,4.049l-1.666-0.834l-2.623,0.834l-3.928-2.266l-3.213,3.69v1.668l6.312,3.453l1.426,2.621c0,0-6.094,2.245-4.523,1.667C322.1,348.955,313.622,349.296,313.622,349.296z',
                    sichuan: 'M279.33,280.95l1.788-4.05l-2.025-2.261l-0.357-3.454l7.145-3.096h1.787l1.069,2.619l0.357,3.336l3.455,2.384l4.522,4.521l2.621-1.669l1.664,1.669l0.6,4.525l2.855,2.021l7.383,0.599l1.189-1.431l-0.357-2.023l4.287-1.07l2.381,0.478l0.238,2.617l2.024,0.237l7.382-1.427l1.43,0.593l0.354,2.026l3.099,0.834l6.549,3.214v7.47l-3.932,1.059l-1.351,7.671l-5.346,3.72l-1.014,5.811l-4.564-2.092l-5.58,2.092l-0.231,4.416l-0.464,4.53l6.507,4.07l2.28,6.977l-2.623,0.833l-3.928-2.263l-3.213,3.691v1.666l6.311,3.452l1.427,2.62l-4.523,1.666l-6.904-0.238l-0.831-2.855l-2.621-0.954l-4.285,2.623l-2.859-1.429l-0.238-3.694l-1.43-1.786v-1.903l-4.047-0.952l-1.072,1.188l0.599,2.858l-3.215,1.431l-0.836,2.021l0.836,2.504l-7.146,8.334l1.191,9.764l-3.453,2.855l-1.666-1.784l-6.906,4.049l-2.621-1.431l-10.001-19.17l-3.931-2.854l-3.216-0.835l-1.428-2.623l1.787-2.854l-2.857-2.264l-3.455,2.858l-3.45,0.595l-2.264-10.359l-0.597-2.499c0,0-2.04-22.568-0.594-16.55c1.446,6.017-3.099-8.336-3.099-8.336l2.267-1.665l-6.55-12.027l-7.977-6.311l1.069-3.692l0.953-1.188l11.669-1.666l7.738,2.262l4.523-1.431l1.785,2.859l5.717,5.715l4.524-0.833v-3.453l1.191-2.266l4.522-1.783l1.667,2.856l2.621-1.903l3.689,0.478v-0.241H279.33z',
                    yunnan: 'M313.622,349.296l-0.836-2.858l-2.618-0.954l-4.283,2.622l-2.859-1.432l-0.238-3.688l-1.43-1.79v-1.903l-4.049-0.952l-1.07,1.188l0.599,2.859l-3.217,1.43l-0.834,2.021l0.834,2.5l-7.146,8.336l1.191,9.766l-3.453,2.854l-1.666-1.784l-6.907,4.048l-2.618-1.431c0,0-11.535-22.106-10.002-19.172c1.533,2.938-3.931-2.854-3.931-2.854l-3.213-0.834l-1.432-2.619l1.787-2.859l-2.857-2.263l-3.455,2.859l-3.451,0.598l-2.263-10.363l-0.596-2.499l-3.454,4.286l-1.427,0.831l0.356,6.551l-0.834,1.431h-1.784l-1.43-1.431l-1.667,2.026l1.667,7.381h2.024l1.667,1.19c0,0,0.468,2.396,0.594,4.521c0.125,2.125-0.833,15.719-0.833,15.719l-10.837,9.766l-0.594,3.689l-2.024,1.787l-0.238,1.903l1.669,4.643l-1.431,3.454l0.834,0.478l5.478-1.433l7.738-0.476l-0.834,3.098l1.431,2.857l0.475,4.287l0.955,1.426l4.524,0.243l2.024,1.425l-2.264,2.856l-0.356,3.453l-1.667,4.05l1.068,1.43l2.86,0.238l4.881,1.784l-0.593,1.667l3.212,4.881h4.524l5.716-3.213l1.786,0.952v1.906l0.832,2.856l1.432,1.429l3.092-0.477l1.192,0.834l1.072-1.192v-4.525l-1.906-8.333l1.431-2.5h4.762h1.192l2.62-3.213l6.783,2.261l2.858-2.503l1.431,1.432l2.858-1.786l2.615,2.618h1.073l0.953-1.428l2.261-2.263l1.073,0.833l3.213-0.595l3.099-2.502l2.619-3.811l3.688-0.831l2.023,2.021l1.43-4.048l2.857-0.235l1.069-0.834l0.957-3.691l-1.192-2.023l-9.765-1.785l-1.668-2.857h-2.854h-2.619l-1.906-3.097l0.24-1.665l1.188-6.907l-3.809-3.689l2.859-12.027l-1.908-1.667l-6.309,1.906l-1.431-2.501v-2.856l-1.428-1.43l3.094-4.286l3.453,1.07l1.43-1.429l6.313,0.951l2.856-0.951L313.622,349.296z',
                    qinghai: 'M153.954,234.989l4.523,1.667l7.742-2.617l-1.193-1.429h-2.021l-0.834-2.259l0.594-2.024l3.692-1.668l2.617-4.286l-7.977-6.548l-0.356-6.906c0,0,2.08-2.545,3.689-2.856c1.609-0.313,26.317-5.119,26.317-5.119l1.783-1.428l3.931,0.594l13.215,3.095l3.93,2.265l5.714,3.451l3.692-0.237l5.714-3.452l7.501,1.188l4.882-2.616l9.999,6.309l5.36-2.023l2.856,6.903l6.907,4.286l5.119,4.527l3.691-1.431l7.146,9.405l1.426,6.071l2.619,3.688l-0.832,7.146l-5.715,4.524l1.073,2.856l-2.265,2.263l-2.856,2.62v4.879l-2.621,2.027l-3.097-0.954l-2.617-2.5l-1.431,2.859l1.787,2.499l4.524,0.594l4.287,4.288h2.618l2.024,2.265l-1.787,4.046v0.239l-3.688-0.479l-2.621,1.905l-1.666-2.856l-4.524,1.785l-1.19,2.264v3.451l-4.524,0.836l-5.715-5.716l-1.787-2.856l-4.524,1.428l-7.738-2.262l-11.67,1.666l-0.952,1.189l-1.071,3.69l-2.263,1.43l0.238,3.692l-6.906,8.931l-11.43-2.383l-0.833-4.285l-7.146-5.718l-15.717-2.498l-6.786-1.19l-2.621-0.238l-5.953-4.883l-12.384-2.857l-8.57-16.551l-0.238-4.642l3.451-1.672v-5.117l2.502-6.313l-2.858-2.856L153.954,234.989z',
                    hainan: 'M385.895,447.523l-5.119,8.93v3.929l-10.238,8.336l-10.598-3.689l-2.025-7.501l0.597-3.454c0,0,8.074-8.075,5.715-5.716c-2.357,2.358,2.025-1.665,2.025-1.665l9.403-1.668l4.289-0.358l1.426-1.666l3.103,0.832L385.895,447.523z',
                    shanghai: 'M484.32,292.485l-3.998-3.332c0,0,0.867-0.375,1.898-2.251c1.031-1.875,1.426-4.286,1.426-4.286l4.287,1.788l2.027,2.854l-1.433,2.024L484.32,292.485z',
                    chongqing: 'M318.986,317.871l5.58-2.092l4.564,2.092l1.014-5.811l5.346-3.72l1.351-7.671l3.932-1.059v-7.47l3.689-1.432l8.096,2.857l1.666,2.26l4.051-0.829l2.5,0.238l2.619,3.452l1.07,6.548l-0.832,2.262l-1.666-0.594c0,0-3.072,3.501-4.884,3.812c-1.809,0.311-8.336,1.429-8.336,1.429l-2.26,2.263l1.783,2.262l0.24,4.883l2.262,0.597l5.715,7.142l0.357,9.407l-3.218,2.412l-0.592,0.445l-3.334-3.451l-3.215-4.29l-0.24-2.619l-2.26-0.476l-2.621,0.834l-4.287-2.025l-2.022,4.883l-3.691,0.239l-2.619,4.049l-1.666-0.834l-2.28-6.977l-6.507-4.07L318.986,317.871z',
                    tianjin: 'M430.413,200.491c0,0-1.832,1.672-3.319,1.284c-1.49-0.388-5.479-1.428-5.479-1.428l-0.237-1.429l-0.238-9.169l3.69-1.667l-0.596-1.666l0.81-3.557l0.385-1.683l1.901,0.95l0.953,3.098l-0.356,2.022l4.047,2.858l0.594,2.263l-2.379,1.668l-0.834,3.809L430.413,200.491z',
                    beijing: 'M421.139,189.75l-0.357-2.856l-0.832-1.905l5.095-2.126l0.381-1.683l-1.189-4.767h-1.668l-6.666-3.449l-3.69,3.69c0,0-1.125,6.585-0.832,4.88c0.289-1.704-3.693,4.288-3.693,4.288l-0.594,4.286l0.832,2.263l4.881-0.834l3.693,1.071l1.784-1.667L421.139,189.75z',
                    ningxia: 'M329.934,230.111l0.24-5.476l1.785-2.499l-0.832-2.62l-9.168-3.454l0.594-3.691l2.858-4.049l-1.786-6.19l-0.835-0.952l-5.954,4.049l-2.855,9.168l-0.953,6.31l-4.762,3.93l-2.859,1.189l-3.438,0.779c0,0,9.184,11.236,7.729,9.458c-1.455-1.78,1.664,7.146,1.664,7.146l-0.834,3.449l5.357,2.859v2.262l4.881,1.19h1.43v-4.048l3.691-0.597l0.951-4.763l-2.619-2.026l-2.023-2.021l0.832-9.163l2.023-1.073l3.453,1.43L329.934,230.111z',
                    neimongol: 'M301.969,226.604l3.438-0.779l2.859-1.188l4.762-3.932l0.953-6.31l2.855-9.168l5.954-4.048l0.835,0.951l1.786,6.19l-2.858,4.049l-0.594,3.691l9.168,3.453l0.832,2.621l5.358-0.359l2.617,0.596l1.191,0.834l9.405-13.454l2.502-0.835l0.593-1.664l-0.236-2.623l3.096-4.523l6.072-0.358l2.262-2.5l1.431,1.074l3.452-2.86h1.904l6.312-9.046l3.215,0.235l3.93-2.855l1.191,1.189l7.381-3.809l-3.689-6.193l1.189-6.311l3.096-6.549l2.619-1.188l1.666,0.832v4.644l2.025,1.43l4.526-3.453l2.021-2.026l2.022,0.835l2.265-2.025l4.881-0.234l0.834-1.667l-1.191-2.622l3.453-3.452l4.049-2.024l6.31,6.908l-0.355,2.618l3.213,4.763l7.385,0.595l1.666-3.453l-1.903-10.002l1.666-1.667l3.453,2.262l3.096,4.644l4.881-7.5l2.264-0.596l3.689-3.692h1.787l3.094-3.095h1.787l1.666-2.856h4.527l4.047-4.051l2.021-2.021v-2.264l-3.213-1.667v-4.286l-5.953-7.502l-5.717,5.478l-1.666-1.19l-0.357-3.096l-2.264-3.453l-0.594-3.931v-4.046l-3.928-2.858l-0.601-1.667l1.074-2.382l7.502,2.022l0.238-3.452l2.621-3.099l-1.789-1.666l0.358-3.214l3.689-1.667l0.834-1.19l-0.598-1.07l-3.927,1.07l-7.145-4.882l-0.357-1.43l3.453-4.524l7.146-10.597l0.594-1.072h1.193l2.26,2.858l0.596,0.479l0.238-13.336l2.26-1.191v-5.121l-0.594-8.333l2.858-11.668l-8.575-6.312l-6.548,5.478l-3.45,0.476l-1.668,1.786l-5.718-0.832l-2.854-3.215l-1.664-5.122l0.236-2.021l-4.525-2.858l-2.621,4.289l-4.881-3.096l-0.834-0.835l2.856-7.5L433.4,7.223h-2.024l-5.119,3.688l-4.285,6.311l1.668,1.071l3.211,0.359l2.504,6.548l-1.43,2.618l-2.502,3.689l-4.644,17.147l1.785,2.856l-1.428,2.498l-10.599,7.742l-5.713-1.071l-3.215-1.191l-0.479,1.667l-4.642,18.577l-2.264,2.378l1.191,3.335l2.854,2.382l4.764-2.623l7.74,0.598l2.26-3.692l4.052-0.951l7.737,2.856l9.408,9.765v2.023l-2.024,1.429l-10.836,0.599l-3.691,2.854l-2.857-0.355l-2.022,3.214l-5.121,1.07l-3.457,5.12l-0.592,3.81l-7.379,4.763l-4.646,0.598l-5.119,6.904l-4.883,2.859l-9.408-2.025l-3.092-1.431l-3.692,3.694l-1.785,6.548l5.119,7.501l-3.335,3.451l-4.643,2.859c0,0-8.422,10.638-6.787,8.571c1.637-2.064-6.619,3.36-8.93,3.93c-2.31,0.568-14.525,1.429-14.525,1.429l-2.264-0.237l-16.906,7.144l-7.742,4.881l-2.262-1.19l-0.83-2.262l-10.36-0.597l-11.909-3.688l-3.211-3.69l-17.385-2.025l-3.217,1.43l-21.072-2.022l-0.358,3.095l1.43,4.883l-0.834,7.976l6.073,8.929l3.096,2.026l4.883-3.812h10.237l2.623,0.953l1.426,2.262l-1.19,2.5l-5.714,4.646l0.597,2.261l6.549,4.88h2.618l0.834,1.072l-0.596,2.023l4.05,3.217l9.403,1.429l4.527-1.19l5.716-5.719l6.903,0.598l2.857,4.289l-1.664,3.926l0.473,2.382l-3.688,2.263l-1.668,2.024l0.596,4.76l6.545,4.647L301.969,226.604z',
                    guangxi: 'M305.646,387.87l3.688,0.241l4.051-3.694l1.668,1.072l7.737,3.216l1.429-0.835l0.235-2.619l1.433-1.429l10.955-7.145l1.903,2.266l6.668,2.021l3.691-4.883l1.666,1.192h2.619v-1.431l3.453-1.192v-1.069l1.43-1.428l0.832,0.236l3.453-3.451l2.856,0.832l2.857-3.931l1.432,3.099l0.832-0.238l4.525-4.288l1.188,0.24l2.021-1.073l3.693,1.073v4.048l2.856,0.595l-0.832,3.929l-2.623,4.29l-1.188,3.688h1.188l3.101-2.854l2.616,5.713l2.025-1.43h2.26l1.666,5.717l-1.666,2.383l0.24,2.5l-5.119,6.547l0.355,6.905l-6.668,5.12l-0.476,4.285l-3.809,1.787l0.354,2.5l-3.694,0.831l-2.853,4.646l-7.502,1.071l-3.93-2.856l-4.049-1.669l-4.049,4.05l-4.158,0.241l-4.058,0.234c0,0-10.996-6.139-9.168-5.119c1.828,1.021-1.666-4.526-1.666-4.526l2.261-4.646l-2.617-1.902h-3.455l-0.832-0.952l-3.691,0.952l-3.692-2.62l1.432-4.048l2.855-0.235l1.069-0.834l0.957-3.69l-1.192-2.024l-9.765-1.785l-1.668-2.856h-2.854h-2.619l-1.906-3.099L305.646,387.87z',
                    xinjiang: 'M153.889,69.508l2.327-0.014l-1.428,4.525l2.025,2.38l0.236,1.666l4.525,4.524l1.191,3.453l5.953,0.357l2.62,2.265h1.429l3.453,7.379l3.451,8.931l-1.784,5.357l0.358,2.025l-3.215,5.477l0.833,4.286l11.192,4.763l12.025,1.788l12.503,8.571l4.049,1.429l0.237,2.261l2.619,5.478l2.619,7.146l3.333,5.953l-1.903,2.263v4.047l-4.286,2.026l-10.596,4.284l-6.907,5.719l-4.881,2.26l-0.834,3.453l1.43,16.55l-3.931-0.596l-1.783,1.431l-26.315,5.119l-3.691,2.856l0.358,6.906l7.978,6.548l-2.62,4.286l-3.69,1.668l-0.597,2.024l0.835,2.259h2.021l1.192,1.429l-7.738,2.617l-4.525-1.667l-2.382-1.424h-5.715l-10.24-4.642h-6.546l-5.121,1.428h-5.714l-8.931,4.879l-7.143-0.834l-7.145,2.5l-5.956-1.907l-3.689-3.211l-9.525-1.427l-6.191,4.28l-3.452-1.425l-2.858-2.263l-6.907-1.667l-1.07-1.189l-2.857-0.237l-9.782,5.945l-10.037-1.25l-0.822-0.359l1.113-8.623l-4.524-1.191l-9.406-6.902l-2.62-0.241l-2.023-4.525l1.427-4.643l-0.477-2.26l-3.451-2.266l-1.192-2.26l-7.143-4.049v-1.189l3.452-1.431l2.023,1.19l2.025-2.025l-0.598-6.785l0.598-5.716l-4.646-4.642l-3.095,0.833l-1.189-3.336l1.785-3.452l-0.952-3.214l3.038-2.749l1.248-1.182v-2.618l4.285-2.024l4.286-0.833l3.811-1.429l3.099,0.832l2.26-0.832l0.833,0.595l0.356,2.859l2.022,0.832l4.765-0.238c0,0,3.566-4.729,5.478-6.073c1.911-1.346,11.19,2.381,11.19,2.381l5.717-4.048l16.552-3.689l1.069-2.264l1.43-6.31l4.643-3.69h1.433v-1.906l0.236-15.836l0.833-3.212l-4.521-1.668l-0.24-1.191l4.762-1.428l12.384-1.073l1.905,2.501l4.287,0.952l1.192,0.239l1.665-2.262l-2.265-2.263l9.169-18.574l1.431-0.953l8.335,4.047h3.689l1.667,2.264l7.979-2.502l2.023-13.212l3.452-2.265l4.048-0.238l2.859-3.452l1.071-3.454l2.263-1.191L153.889,69.508z',
                    xizang: 'M152.525,339.529l6.787,0.834l2.265,3.216l1.189,0.477l10.239-1.904l0.594-1.787l2.023-1.07l4.884-4.05l4.285-0.594l3.93-2.501l7.74-4.286l0.832,1.428l5.716,1.904l8.334-4.285l2.618,1.787l-2.379,3.452l0.952,0.833h3.332l0.359,1.427l-2.857,5.121l0.833,0.834h1.666l8.336,2.265l3.691-3.099l5.478,4.289l1.667-2.026l1.43,1.431h1.784l0.834-1.431l-0.356-6.549l1.429-0.835l3.451-4.284l-0.594-16.549l-3.099-8.337l2.265-1.665l-6.548-12.027l-7.979-6.311l-2.26,1.43l0.238,3.692l-6.908,8.931l-11.428-2.384l-0.833-4.286l-7.146-5.716l-15.717-2.498l-6.787-1.188l-2.619-0.241l-5.952-4.883l-12.385-2.857l-8.57-16.551l-0.238-4.642l3.451-1.672v-5.117l2.502-6.311l-2.858-2.858l3.811-3.095l-2.383-1.425h-5.716l-10.238-4.644h-6.549l-5.118,1.43h-5.715l-8.931,4.879l-7.144-0.834l-7.146,2.5l-5.954-1.906l-3.688-3.212l-9.526-1.427l-6.192,4.28l-3.45-1.425l-2.859-2.263l-6.908-1.667l-1.065-1.189l-2.857-0.237l-9.782,5.945l-10.412-1.297l2.428,4.398l2.68,1.995l-0.821,3.842l-0.231,3.758l0.256,2.672l0,0l-0.193,3.208l3.451,3.454l0.239,4.884l-1.072,1.907l-5.119,0.591l-2.621-2.854l-2.619,0.355l-0.476,2.265l1.428,3.688l0.479,2.62v3.333l-0.833,2.381l0.354,1.909l3.336,0.356l1.785,3.094l7.739,6.071v1.906l5.716,6.311l1.902,2.262l1.79,0.595l3.451-3.451l3.096,2.856c0,0,15.395,13.684,13.098,11.193c-2.297-2.491,2.381,5.715,2.381,5.715h2.859l1.667-1.665l1.426,1.428v5.117l7.741,4.287l1.667-0.357l1.191,4.287l6.548,3.81l0.238,2.501l1.188,0.835l5.717-0.24h3.098l4.644,3.457l10.24-0.359l5.476-0.239l1.428,2.265l-1.188,4.883l1.427,1.664l5.715-4.761l7.146-5.239l5.12,0.95L152.525,339.529z',
                    guangdong: 'M391.37,382.632l2.265-1.666v-3.45l1.188-1.072l2.859,0.235l4.879,2.264l0.834-1.667l-1.188-2.025l0.354-1.427l3.098-2.619l5.478,1.427l3.096-1.905l2.264,2.265l5.478-1.429l1.07,2.021l-1.666,2.264l-2.859,4.288v1.069l1.67,1.192l11.43-4.525l4.048,2.264l1.19-1.191l-1.19-2.499l0.28-1.663l7.459,1.663l1.431,1.072l2.022-0.24l3.094,3.929l3.451,7.502l-2.26,1.667l-2.023,3.689l-1.786,0.596l-1.664,3.455l-5.716,2.854l-2.266-1.188l-1.426,2.382v0.833h-1.787h-3.098l-2.857,2.023l-2.021-1.188l-2.5,1.663l-6.314,2.619l-5.121-4.05l-0.354,3.217l1.788,4.882l-4.646,1.904l-2.498,3.452l-4.887,1.191l-2.617,1.073h-5.119c0,0-0.869,2.545-3.453,3.452c-2.584,0.904-9.168,3.213-9.168,3.213l-4.522,3.098l-2.265,2.263l4.287,6.903l-2.856,2.501l-3.451-0.238l-4.053-7.381l0.954-5.238v-2.501l2.854-4.646l3.695-0.831l-0.355-2.501l3.809-1.785l0.476-4.288l6.668-5.119l-0.355-6.905l5.119-6.547l-0.24-2.5l1.666-2.381L391.37,382.632z',
                    hongkong: 'M417.745,409.005l3.394,0.773l3.453-2.558l1.666,4.582c0,0-5.521,2.673-3.691,1.785c1.828-0.884-4.641-0.355-4.641-0.355l-0.834-3.454L417.745,409.005z',
                    taiwan: 'M505.438,371.203l-3.217,19.169l-1.664,6.07v5.123l-1.43,1.427l-3.451-5.119l-3.693-2.858l-3.215-8.571c0,0-0.451-5.62,0.357-7.74c0.809-2.118,5.356-14.05,5.356-14.05l6.313-5.357l4.051,1.904L505.438,371.203z',
                    aomen: 'M412.032,413.183l-0.96,1.752c0,0,0.889,0.883,3.98,1.086s5.995-0.493,5.995-0.493L410.032,420.183z'
                },
                names: {
                    heilongjiang: '黑龙江',
                    jilin: '吉林',
                    liaoning: '辽宁',
                    hebei: '河北',
                    shandong: '山东',
                    jiangsu: '江苏',
                    zhejiang: '浙江',
                    anhui: '安徽',
                    henan: '河南',
                    shanxi: '山西',
                    shaanxi: '陕西',
                    gansu: '甘肃',
                    hubei: '湖北',
                    jiangxi: '江西',
                    fujian: '福建',
                    hunan: '湖南',
                    guizhou: '贵州',
                    sichuan: '四川',
                    yunnan: '云南',
                    qinghai: '青海',
                    hainan: '海南',
                    shanghai: '上海',
                    chongqing: '重庆',
                    tianjin: '天津',
                    beijing: '北京',
                    ningxia: '宁夏',
                    neimongol: '内蒙古',
                    guangxi: '广西',
                    xinjiang: '新疆',
                    xizang: '西藏',
                    guangdong: '广东',
                    hongkong: '香港',
                    taiwan: '台湾',
                    aomen: '澳门'
                }
            };

            /**
             * object that keeps the state of map
             */
            var _mapObj;

            /**
             * !todo to be cancled
             */
            var _dom;

            var init = function init(dom, opts) {
                _options = opts;
                _dom = dom;

                _mapObj = _render();
            };

            /**
             * !todo
             * @param selectedObjs
             */
            var setSelected = function setSelected(selectedObjs) {

            };

            /**
             * render the map
             * @private
             */
            var _render = function() {
                var r = _scaleRaphael(_dom.attr("id"), _mapMeta.width, _mapMeta.height),
                    attributes = {
                        fill: _options.backgroudColor,
//                        cursor: 'pointer',
                        stroke: _options.strokeColor,
                        'stroke-width': _options.strokeWidth,
                        'stroke-linejoin': 'round'
                    };

                for (var shape in _mapMeta.shapes) {
                    var obj = r.path(_mapMeta['shapes'][shape]);

                    //init original attributes
                    obj.id = shape;
                    obj.name = _mapMeta['names'][shape];
                    obj.attr(attributes);

                    //set custom color according to the options
                    //if have optioned
                    var selectedShape = _options.data[shape];
                    if(selectedShape) {
                        obj.attr({
                            //!todo refactor random color
                            fill : selectedShape['color'] || _options.selectedColor

                        });

                        obj.value = selectedShape['value'] || "";
                    }

                    //add events listeners
                    if(_options.hoverCallback !== false) {
                        var originalColor;

                        obj.hover(function(event) {
                            originalColor = this.attr().fill;
                            //!todo add some animate
//                            this.animate({
//                                fill : _options.hoverColor
//                            }, 50);
                            this.attr({fill : _options.hoverColor, cursor : 'pointer'});
                            _options.hoverCallback(this, event);
                        });

                        obj.mouseout(function() {
//                            this.animate({
//                                fill : originalColor
//                            }, 50);
                            this.attr({fill : originalColor});

                        });

                    }

                    r.changeSize(_options.width, _options.height, false, false);
                }

                return r;
            };

            var _scaleRaphael = function(containerId, width, height) {
                var wrapper = document.getElementById(containerId);
                if (!wrapper.style.position) wrapper.style.position = "relative";
                wrapper.style.width = width + "px";
                wrapper.style.height = height + "px";
                wrapper.style.overflow = "hidden";
                var nestedWrapper;
                if (Raphael.type == "VML") {
                    wrapper.innerHTML = "<rvml:group style='position : absolute; width: 1000px; height: 1000px; top: 0px; left: 0px' coordsize='1000,1000' class='rvml' id='vmlgroup_" + containerId + "'><\/rvml:group>";
                    nestedWrapper = document.getElementById("vmlgroup_" + containerId);
                } else {
                    wrapper.innerHTML = "<div class='svggroup'><\/div>";
                    nestedWrapper = wrapper.getElementsByClassName("svggroup")[0];
                }
                var paper = new Raphael(nestedWrapper, width, height);
                var vmlDiv;
                if (Raphael.type == "SVG") {
                    paper.canvas.setAttribute("viewBox", "0 0 " + width + " " + height);
                } else {
                    vmlDiv = wrapper.getElementsByTagName("div")[0];
                }
                paper.changeSize = function (w, h, center, clipping) {
                    clipping = !clipping;
                    var ratioW = w / width;
                    var ratioH = h / height;
                    var scale = ratioW < ratioH ? ratioW : ratioH;
                    var newHeight = parseInt(height * scale);
                    var newWidth = parseInt(width * scale);
                    if (Raphael.type == "VML") {
                        var txt = document.getElementsByTagName("textpath");
                        for (var i in txt) {
                            var curr = txt[i];
                            if (curr.style) {
                                if (!curr._fontSize) {
                                    var mod = curr.style.font.split("px");
                                    curr._fontSize = parseInt(mod[0]);
                                    curr._font = mod[1];
                                }
                                curr.style.font = curr._fontSize * scale + "px" + curr._font;
                            }
                        }
                        var newSize;
                        if (newWidth < newHeight) {
                            newSize = newWidth * 1000 / width;
                        } else {
                            newSize = newHeight * 1000 / height;
                        }
                        newSize = parseInt(newSize);
                        nestedWrapper.style.width = newSize + "px";
                        nestedWrapper.style.height = newSize + "px";
                        if (clipping) {
                            nestedWrapper.style.left = parseInt((w - newWidth) / 2) + "px";
                            nestedWrapper.style.top = parseInt((h - newHeight) / 2) + "px";
                        }
                        vmlDiv.style.overflow = "visible";
                    }
                    if (clipping) {
                        newWidth = w;
                        newHeight = h;
                    }
                    wrapper.style.width = newWidth + "px";
                    wrapper.style.height = newHeight + "px";
                    paper.setSize(newWidth, newHeight);
                    if (center) {
                        wrapper.style.position = "absolute";
                        wrapper.style.left = parseInt((w - newWidth) / 2) + "px";
                        wrapper.style.top = parseInt((h - newHeight) / 2) + "px";
                    }
                };
                paper.scaleAll = function (amount) {
                    paper.changeSize(width * amount, height * amount);
                };
                paper.changeSize(width, height);
                paper.w = width;
                paper.h = height;
                return paper;
            };

            return {
                init : init
                //setSelected : setSelected
            };

        })();
        griMap.init(_this, opts);

        return griMap;
    }

    /**
     * default options
     * @type {Object}
     */
    $.fn.griMap.defaults = {
        data : {},
        width: 500,
        height: 400,
        backgroudColor: '#AAD5FF',
        selectedColor: '#E32F02',
        hoverColor : '#feb41c',
        strokeWidth: 1,
        strokeColor: '#F9FCFE',

        hoverCallback : false
    };

})(jQuery);

// ┌────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël 2.1.0 - JavaScript Vector Library                          │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\
// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\
// └────────────────────────────────────────────────────────────────────┘ \\
(function (t) { var e, r, i = "0.4.2", n = "hasOwnProperty", a = /[\.\/]/, s = "*", o = function () { }, l = function (t, e) { return t - e }, h = { n: {} }, u = function (t, i) { t += ""; var n, a = r, s = Array.prototype.slice.call(arguments, 2), o = u.listeners(t), h = 0, c = [], f = {}, p = [], d = e; e = t, r = 0; for (var g = 0, x = o.length; x > g; g++) "zIndex" in o[g] && (c.push(o[g].zIndex), 0 > o[g].zIndex && (f[o[g].zIndex] = o[g])); for (c.sort(l) ; 0 > c[h];) if (n = f[c[h++]], p.push(n.apply(i, s)), r) return r = a, p; for (g = 0; x > g; g++) if (n = o[g], "zIndex" in n) if (n.zIndex == c[h]) { if (p.push(n.apply(i, s)), r) break; do if (h++, n = f[c[h]], n && p.push(n.apply(i, s)), r) break; while (n) } else f[n.zIndex] = n; else if (p.push(n.apply(i, s)), r) break; return r = a, e = d, p.length ? p : null }; u._events = h, u.listeners = function (t) { var e, r, i, n, o, l, u, c, f = t.split(a), p = h, d = [p], g = []; for (n = 0, o = f.length; o > n; n++) { for (c = [], l = 0, u = d.length; u > l; l++) for (p = d[l].n, r = [p[f[n]], p[s]], i = 2; i--;) e = r[i], e && (c.push(e), g = g.concat(e.f || [])); d = c } return g }, u.on = function (t, e) { if (t += "", "function" != typeof e) return function () { }; for (var r = t.split(a), i = h, n = 0, s = r.length; s > n; n++) i = i.n, i = i.hasOwnProperty(r[n]) && i[r[n]] || (i[r[n]] = { n: {} }); for (i.f = i.f || [], n = 0, s = i.f.length; s > n; n++) if (i.f[n] == e) return o; return i.f.push(e), function (t) { +t == +t && (e.zIndex = +t) } }, u.f = function (t) { var e = [].slice.call(arguments, 1); return function () { u.apply(null, [t, null].concat(e).concat([].slice.call(arguments, 0))) } }, u.stop = function () { r = 1 }, u.nt = function (t) { return t ? RegExp("(?:\\.|\\/|^)" + t + "(?:\\.|\\/|$)").test(e) : e }, u.nts = function () { return e.split(a) }, u.off = u.unbind = function (t, e) { if (!t) return u._events = h = { n: {} }, void 0; var r, i, o, l, c, f, p, d = t.split(a), g = [h]; for (l = 0, c = d.length; c > l; l++) for (f = 0; g.length > f; f += o.length - 2) { if (o = [f, 1], r = g[f].n, d[l] != s) r[d[l]] && o.push(r[d[l]]); else for (i in r) r[n](i) && o.push(r[i]); g.splice.apply(g, o) } for (l = 0, c = g.length; c > l; l++) for (r = g[l]; r.n;) { if (e) { if (r.f) { for (f = 0, p = r.f.length; p > f; f++) if (r.f[f] == e) { r.f.splice(f, 1); break } !r.f.length && delete r.f } for (i in r.n) if (r.n[n](i) && r.n[i].f) { var x = r.n[i].f; for (f = 0, p = x.length; p > f; f++) if (x[f] == e) { x.splice(f, 1); break } !x.length && delete r.n[i].f } } else { delete r.f; for (i in r.n) r.n[n](i) && r.n[i].f && delete r.n[i].f } r = r.n } }, u.once = function (t, e) { var r = function () { return u.unbind(t, r), e.apply(this, arguments) }; return u.on(t, r) }, u.version = i, u.toString = function () { return "You are running Eve " + i }, "undefined" != typeof module && module.exports ? module.exports = u : "undefined" != typeof define ? define("eve", [], function () { return u }) : t.eve = u })(this), function (t, e) { "function" == typeof define && define.amd ? define(["eve"], function (r) { return e(t, r) }) : e(t, t.eve) }(this, function (t, e) {
    function r(t) { if (r.is(t, "function")) return b ? t() : e.on("raphael.DOMload", t); if (r.is(t, H)) return r._engine.create[N](r, t.splice(0, 3 + r.is(t[0], W))).add(t); var i = Array.prototype.slice.call(arguments, 0); if (r.is(i[i.length - 1], "function")) { var n = i.pop(); return b ? n.call(r._engine.create[N](r, i)) : e.on("raphael.DOMload", function () { n.call(r._engine.create[N](r, i)) }) } return r._engine.create[N](r, arguments) } function i(t) { if (Object(t) !== t) return t; var e = new t.constructor; for (var r in t) t[B](r) && (e[r] = i(t[r])); return e } function n(t, e) { for (var r = 0, i = t.length; i > r; r++) if (t[r] === e) return t.push(t.splice(r, 1)[0]) } function a(t, e, r) { function i() { var a = Array.prototype.slice.call(arguments, 0), s = a.join("␀"), o = i.cache = i.cache || {}, l = i.count = i.count || []; return o[B](s) ? (n(l, s), r ? r(o[s]) : o[s]) : (l.length >= 1e3 && delete o[l.shift()], l.push(s), o[s] = t[N](e, a), r ? r(o[s]) : o[s]) } return i } function s() { return this.hex } function o(t, e) { for (var r = [], i = 0, n = t.length; n - 2 * !e > i; i += 2) { var a = [{ x: +t[i - 2], y: +t[i - 1] }, { x: +t[i], y: +t[i + 1] }, { x: +t[i + 2], y: +t[i + 3] }, { x: +t[i + 4], y: +t[i + 5] }]; e ? i ? n - 4 == i ? a[3] = { x: +t[0], y: +t[1] } : n - 2 == i && (a[2] = { x: +t[0], y: +t[1] }, a[3] = { x: +t[2], y: +t[3] }) : a[0] = { x: +t[n - 2], y: +t[n - 1] } : n - 4 == i ? a[3] = a[2] : i || (a[0] = { x: +t[i], y: +t[i + 1] }), r.push(["C", (-a[0].x + 6 * a[1].x + a[2].x) / 6, (-a[0].y + 6 * a[1].y + a[2].y) / 6, (a[1].x + 6 * a[2].x - a[3].x) / 6, (a[1].y + 6 * a[2].y - a[3].y) / 6, a[2].x, a[2].y]) } return r } function l(t, e, r, i, n) { var a = -3 * e + 9 * r - 9 * i + 3 * n, s = t * a + 6 * e - 12 * r + 6 * i; return t * s - 3 * e + 3 * r } function h(t, e, r, i, n, a, s, o, h) { null == h && (h = 1), h = h > 1 ? 1 : 0 > h ? 0 : h; for (var u = h / 2, c = 12, f = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], p = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], d = 0, g = 0; c > g; g++) { var x = u * f[g] + u, v = l(x, t, r, n, s), y = l(x, e, i, a, o), m = v * v + y * y; d += p[g] * q.sqrt(m) } return u * d } function u(t, e, r, i, n, a, s, o, l) { if (!(0 > l || l > h(t, e, r, i, n, a, s, o))) { var u, c = 1, f = c / 2, p = c - f, d = .01; for (u = h(t, e, r, i, n, a, s, o, p) ; V(u - l) > d;) f /= 2, p += (l > u ? 1 : -1) * f, u = h(t, e, r, i, n, a, s, o, p); return p } } function c(t, e, r, i, n, a, s, o) { if (!(D(t, r) < O(n, s) || O(t, r) > D(n, s) || D(e, i) < O(a, o) || O(e, i) > D(a, o))) { var l = (t * i - e * r) * (n - s) - (t - r) * (n * o - a * s), h = (t * i - e * r) * (a - o) - (e - i) * (n * o - a * s), u = (t - r) * (a - o) - (e - i) * (n - s); if (u) { var c = l / u, f = h / u, p = +c.toFixed(2), d = +f.toFixed(2); if (!(+O(t, r).toFixed(2) > p || p > +D(t, r).toFixed(2) || +O(n, s).toFixed(2) > p || p > +D(n, s).toFixed(2) || +O(e, i).toFixed(2) > d || d > +D(e, i).toFixed(2) || +O(a, o).toFixed(2) > d || d > +D(a, o).toFixed(2))) return { x: c, y: f } } } } function f(t, e, i) { var n = r.bezierBBox(t), a = r.bezierBBox(e); if (!r.isBBoxIntersect(n, a)) return i ? 0 : []; for (var s = h.apply(0, t), o = h.apply(0, e), l = ~~(s / 5), u = ~~(o / 5), f = [], p = [], d = {}, g = i ? 0 : [], x = 0; l + 1 > x; x++) { var v = r.findDotsAtSegment.apply(r, t.concat(x / l)); f.push({ x: v.x, y: v.y, t: x / l }) } for (x = 0; u + 1 > x; x++) v = r.findDotsAtSegment.apply(r, e.concat(x / u)), p.push({ x: v.x, y: v.y, t: x / u }); for (x = 0; l > x; x++) for (var y = 0; u > y; y++) { var m = f[x], b = f[x + 1], _ = p[y], w = p[y + 1], k = .001 > V(b.x - m.x) ? "y" : "x", C = .001 > V(w.x - _.x) ? "y" : "x", B = c(m.x, m.y, b.x, b.y, _.x, _.y, w.x, w.y); if (B) { if (d[B.x.toFixed(4)] == B.y.toFixed(4)) continue; d[B.x.toFixed(4)] = B.y.toFixed(4); var S = m.t + V((B[k] - m[k]) / (b[k] - m[k])) * (b.t - m.t), T = _.t + V((B[C] - _[C]) / (w[C] - _[C])) * (w.t - _.t); S >= 0 && 1 >= S && T >= 0 && 1 >= T && (i ? g++ : g.push({ x: B.x, y: B.y, t1: S, t2: T })) } } return g } function p(t, e, i) { t = r._path2curve(t), e = r._path2curve(e); for (var n, a, s, o, l, h, u, c, p, d, g = i ? 0 : [], x = 0, v = t.length; v > x; x++) { var y = t[x]; if ("M" == y[0]) n = l = y[1], a = h = y[2]; else { "C" == y[0] ? (p = [n, a].concat(y.slice(1)), n = p[6], a = p[7]) : (p = [n, a, n, a, l, h, l, h], n = l, a = h); for (var m = 0, b = e.length; b > m; m++) { var _ = e[m]; if ("M" == _[0]) s = u = _[1], o = c = _[2]; else { "C" == _[0] ? (d = [s, o].concat(_.slice(1)), s = d[6], o = d[7]) : (d = [s, o, s, o, u, c, u, c], s = u, o = c); var w = f(p, d, i); if (i) g += w; else { for (var k = 0, C = w.length; C > k; k++) w[k].segment1 = x, w[k].segment2 = m, w[k].bez1 = p, w[k].bez2 = d; g = g.concat(w) } } } } } return g } function d(t, e, r, i, n, a) { null != t ? (this.a = +t, this.b = +e, this.c = +r, this.d = +i, this.e = +n, this.f = +a) : (this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.e = 0, this.f = 0) } function g() { return this.x + z + this.y + z + this.width + " × " + this.height } function x(t, e, r, i, n, a) { function s(t) { return ((c * t + u) * t + h) * t } function o(t, e) { var r = l(t, e); return ((d * r + p) * r + f) * r } function l(t, e) { var r, i, n, a, o, l; for (n = t, l = 0; 8 > l; l++) { if (a = s(n) - t, e > V(a)) return n; if (o = (3 * c * n + 2 * u) * n + h, 1e-6 > V(o)) break; n -= a / o } if (r = 0, i = 1, n = t, r > n) return r; if (n > i) return i; for (; i > r;) { if (a = s(n), e > V(a - t)) return n; t > a ? r = n : i = n, n = (i - r) / 2 + r } return n } var h = 3 * e, u = 3 * (i - e) - h, c = 1 - h - u, f = 3 * r, p = 3 * (n - r) - f, d = 1 - f - p; return o(t, 1 / (200 * a)) } function v(t, e) { var r = [], i = {}; if (this.ms = e, this.times = 1, t) { for (var n in t) t[B](n) && (i[K(n)] = t[n], r.push(K(n))); r.sort(ce) } this.anim = i, this.top = r[r.length - 1], this.percents = r } function y(t, i, n, a, s, o) { n = K(n); var l, h, u, c, f, p, g = t.ms, v = {}, y = {}, m = {}; if (a) for (_ = 0, k = or.length; k > _; _++) { var b = or[_]; if (b.el.id == i.id && b.anim == t) { b.percent != n ? (or.splice(_, 1), u = 1) : h = b, i.attr(b.totalOrigin); break } } else a = +y; for (var _ = 0, k = t.percents.length; k > _; _++) { if (t.percents[_] == n || t.percents[_] > a * t.top) { n = t.percents[_], f = t.percents[_ - 1] || 0, g = g / t.top * (n - f), c = t.percents[_ + 1], l = t.anim[n]; break } a && i.attr(t.anim[t.percents[_]]) } if (l) { if (h) h.initstatus = a, h.start = new Date - h.ms * a; else { for (var C in l) if (l[B](C) && (ie[B](C) || i.paper.customAttributes[B](C))) switch (v[C] = i.attr(C), null == v[C] && (v[C] = re[C]), y[C] = l[C], ie[C]) { case W: m[C] = (y[C] - v[C]) / g; break; case "colour": v[C] = r.getRGB(v[C]); var S = r.getRGB(y[C]); m[C] = { r: (S.r - v[C].r) / g, g: (S.g - v[C].g) / g, b: (S.b - v[C].b) / g }; break; case "path": var T = Re(v[C], y[C]), A = T[1]; for (v[C] = T[0], m[C] = [], _ = 0, k = v[C].length; k > _; _++) { m[C][_] = [0]; for (var N = 1, L = v[C][_].length; L > N; N++) m[C][_][N] = (A[_][N] - v[C][_][N]) / g } break; case "transform": var M = i._, z = Oe(M[C], y[C]); if (z) for (v[C] = z.from, y[C] = z.to, m[C] = [], m[C].real = !0, _ = 0, k = v[C].length; k > _; _++) for (m[C][_] = [v[C][_][0]], N = 1, L = v[C][_].length; L > N; N++) m[C][_][N] = (y[C][_][N] - v[C][_][N]) / g; else { var R = i.matrix || new d, I = { _: { transform: M.transform }, getBBox: function () { return i.getBBox(1) } }; v[C] = [R.a, R.b, R.c, R.d, R.e, R.f], qe(I, y[C]), y[C] = I._.transform, m[C] = [(I.matrix.a - R.a) / g, (I.matrix.b - R.b) / g, (I.matrix.c - R.c) / g, (I.matrix.d - R.d) / g, (I.matrix.e - R.e) / g, (I.matrix.f - R.f) / g] } break; case "csv": var j = F(l[C])[P](w), q = F(v[C])[P](w); if ("clip-rect" == C) for (v[C] = q, m[C] = [], _ = q.length; _--;) m[C][_] = (j[_] - v[C][_]) / g; y[C] = j; break; default: for (j = [][E](l[C]), q = [][E](v[C]), m[C] = [], _ = i.paper.customAttributes[C].length; _--;) m[C][_] = ((j[_] || 0) - (q[_] || 0)) / g } var D = l.easing, O = r.easing_formulas[D]; if (!O) if (O = F(D).match(Q), O && 5 == O.length) { var V = O; O = function (t) { return x(t, +V[1], +V[2], +V[3], +V[4], g) } } else O = pe; if (p = l.start || t.start || +new Date, b = { anim: t, percent: n, timestamp: p, start: p + (t.del || 0), status: 0, initstatus: a || 0, stop: !1, ms: g, easing: O, from: v, diff: m, to: y, el: i, callback: l.callback, prev: f, next: c, repeat: o || t.times, origin: i.attr(), totalOrigin: s }, or.push(b), a && !h && !u && (b.stop = !0, b.start = new Date - g * a, 1 == or.length)) return hr(); u && (b.start = new Date - b.ms * a), 1 == or.length && lr(hr) } e("raphael.anim.start." + i.id, i, t) } } function m(t) { for (var e = 0; or.length > e; e++) or[e].el.paper == t && or.splice(e--, 1) } r.version = "2.1.0", r.eve = e; var b, _, w = /[, ]+/, k = { circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1 }, C = /\{(\d+)\}/g, B = "hasOwnProperty", S = { doc: document, win: t }, T = { was: Object.prototype[B].call(S.win, "Raphael"), is: S.win.Raphael }, A = function () { this.ca = this.customAttributes = {} }, N = "apply", E = "concat", L = "ontouchstart" in S.win || S.win.DocumentTouch && S.doc instanceof DocumentTouch, M = "", z = " ", F = String, P = "split", R = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[P](z), I = { mousedown: "touchstart", mousemove: "touchmove", mouseup: "touchend" }, j = F.prototype.toLowerCase, q = Math, D = q.max, O = q.min, V = q.abs, Y = q.pow, G = q.PI, W = "number", X = "string", H = "array", U = Object.prototype.toString, $ = (r._ISURL = /^url\(['"]?([^\)]+?)['"]?\)$/i, /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i), Z = { NaN: 1, Infinity: 1, "-Infinity": 1 }, Q = /^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/, J = q.round, K = parseFloat, te = parseInt, ee = F.prototype.toUpperCase, re = r._availableAttrs = { "arrow-end": "none", "arrow-start": "none", blur: 0, "clip-rect": "0 0 1e9 1e9", cursor: "default", cx: 0, cy: 0, fill: "#fff", "fill-opacity": 1, font: '10px "Arial"', "font-family": '"Arial"', "font-size": "10", "font-style": "normal", "font-weight": 400, gradient: 0, height: 0, href: "http://raphaeljs.com/", "letter-spacing": 0, opacity: 1, path: "M0,0", r: 0, rx: 0, ry: 0, src: "", stroke: "#000", "stroke-dasharray": "", "stroke-linecap": "butt", "stroke-linejoin": "butt", "stroke-miterlimit": 0, "stroke-opacity": 1, "stroke-width": 1, target: "_blank", "text-anchor": "middle", title: "Raphael", transform: "", width: 0, x: 0, y: 0 }, ie = r._availableAnimAttrs = { blur: W, "clip-rect": "csv", cx: W, cy: W, fill: "colour", "fill-opacity": W, "font-size": W, height: W, opacity: W, path: "path", r: W, rx: W, ry: W, stroke: "colour", "stroke-opacity": W, "stroke-width": W, transform: "transform", width: W, x: W, y: W }, ne = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/, ae = { hs: 1, rg: 1 }, se = /,?([achlmqrstvxz]),?/gi, oe = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi, le = /([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi, he = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi, ue = (r._radial_gradient = /^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/, {}), ce = function (t, e) { return K(t) - K(e) }, fe = function () { }, pe = function (t) { return t }, de = r._rectPath = function (t, e, r, i, n) { return n ? [["M", t + n, e], ["l", r - 2 * n, 0], ["a", n, n, 0, 0, 1, n, n], ["l", 0, i - 2 * n], ["a", n, n, 0, 0, 1, -n, n], ["l", 2 * n - r, 0], ["a", n, n, 0, 0, 1, -n, -n], ["l", 0, 2 * n - i], ["a", n, n, 0, 0, 1, n, -n], ["z"]] : [["M", t, e], ["l", r, 0], ["l", 0, i], ["l", -r, 0], ["z"]] }, ge = function (t, e, r, i) { return null == i && (i = r), [["M", t, e], ["m", 0, -i], ["a", r, i, 0, 1, 1, 0, 2 * i], ["a", r, i, 0, 1, 1, 0, -2 * i], ["z"]] }, xe = r._getPath = { path: function (t) { return t.attr("path") }, circle: function (t) { var e = t.attrs; return ge(e.cx, e.cy, e.r) }, ellipse: function (t) { var e = t.attrs; return ge(e.cx, e.cy, e.rx, e.ry) }, rect: function (t) { var e = t.attrs; return de(e.x, e.y, e.width, e.height, e.r) }, image: function (t) { var e = t.attrs; return de(e.x, e.y, e.width, e.height) }, text: function (t) { var e = t._getBBox(); return de(e.x, e.y, e.width, e.height) }, set: function (t) { var e = t._getBBox(); return de(e.x, e.y, e.width, e.height) } }, ve = r.mapPath = function (t, e) { if (!e) return t; var r, i, n, a, s, o, l; for (t = Re(t), n = 0, s = t.length; s > n; n++) for (l = t[n], a = 1, o = l.length; o > a; a += 2) r = e.x(l[a], l[a + 1]), i = e.y(l[a], l[a + 1]), l[a] = r, l[a + 1] = i; return t }; if (r._g = S, r.type = S.win.SVGAngle || S.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML", "VML" == r.type) { var ye, me = S.doc.createElement("div"); if (me.innerHTML = '<v:shape adj="1"/>', ye = me.firstChild, ye.style.behavior = "url(#default#VML)", !ye || "object" != typeof ye.adj) return r.type = M; me = null } r.svg = !(r.vml = "VML" == r.type), r._Paper = A, r.fn = _ = A.prototype = r.prototype, r._id = 0, r._oid = 0, r.is = function (t, e) { return e = j.call(e), "finite" == e ? !Z[B](+t) : "array" == e ? t instanceof Array : "null" == e && null === t || e == typeof t && null !== t || "object" == e && t === Object(t) || "array" == e && Array.isArray && Array.isArray(t) || U.call(t).slice(8, -1).toLowerCase() == e }, r.angle = function (t, e, i, n, a, s) { if (null == a) { var o = t - i, l = e - n; return o || l ? (180 + 180 * q.atan2(-l, -o) / G + 360) % 360 : 0 } return r.angle(t, e, a, s) - r.angle(i, n, a, s) }, r.rad = function (t) { return t % 360 * G / 180 }, r.deg = function (t) { return 180 * t / G % 360 }, r.snapTo = function (t, e, i) { if (i = r.is(i, "finite") ? i : 10, r.is(t, H)) { for (var n = t.length; n--;) if (i >= V(t[n] - e)) return t[n] } else { t = +t; var a = e % t; if (i > a) return e - a; if (a > t - i) return e - a + t } return e }, r.createUUID = function (t, e) { return function () { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t, e).toUpperCase() } }(/[xy]/g, function (t) { var e = 0 | 16 * q.random(), r = "x" == t ? e : 8 | 3 & e; return r.toString(16) }), r.setWindow = function (t) { e("raphael.setWindow", r, S.win, t), S.win = t, S.doc = S.win.document, r._engine.initWin && r._engine.initWin(S.win) }; var be = function (t) { if (r.vml) { var e, i = /^\s+|\s+$/g; try { var n = new ActiveXObject("htmlfile"); n.write("<body>"), n.close(), e = n.body } catch (s) { e = createPopup().document.body } var o = e.createTextRange(); be = a(function (t) { try { e.style.color = F(t).replace(i, M); var r = o.queryCommandValue("ForeColor"); return r = (255 & r) << 16 | 65280 & r | (16711680 & r) >>> 16, "#" + ("000000" + r.toString(16)).slice(-6) } catch (n) { return "none" } }) } else { var l = S.doc.createElement("i"); l.title = "Raphaël Colour Picker", l.style.display = "none", S.doc.body.appendChild(l), be = a(function (t) { return l.style.color = t, S.doc.defaultView.getComputedStyle(l, M).getPropertyValue("color") }) } return be(t) }, _e = function () { return "hsb(" + [this.h, this.s, this.b] + ")" }, we = function () { return "hsl(" + [this.h, this.s, this.l] + ")" }, ke = function () { return this.hex }, Ce = function (t, e, i) { if (null == e && r.is(t, "object") && "r" in t && "g" in t && "b" in t && (i = t.b, e = t.g, t = t.r), null == e && r.is(t, X)) { var n = r.getRGB(t); t = n.r, e = n.g, i = n.b } return (t > 1 || e > 1 || i > 1) && (t /= 255, e /= 255, i /= 255), [t, e, i] }, Be = function (t, e, i, n) { t *= 255, e *= 255, i *= 255; var a = { r: t, g: e, b: i, hex: r.rgb(t, e, i), toString: ke }; return r.is(n, "finite") && (a.opacity = n), a }; r.color = function (t) { var e; return r.is(t, "object") && "h" in t && "s" in t && "b" in t ? (e = r.hsb2rgb(t), t.r = e.r, t.g = e.g, t.b = e.b, t.hex = e.hex) : r.is(t, "object") && "h" in t && "s" in t && "l" in t ? (e = r.hsl2rgb(t), t.r = e.r, t.g = e.g, t.b = e.b, t.hex = e.hex) : (r.is(t, "string") && (t = r.getRGB(t)), r.is(t, "object") && "r" in t && "g" in t && "b" in t ? (e = r.rgb2hsl(t), t.h = e.h, t.s = e.s, t.l = e.l, e = r.rgb2hsb(t), t.v = e.b) : (t = { hex: "none" }, t.r = t.g = t.b = t.h = t.s = t.v = t.l = -1)), t.toString = ke, t }, r.hsb2rgb = function (t, e, r, i) { this.is(t, "object") && "h" in t && "s" in t && "b" in t && (r = t.b, e = t.s, t = t.h, i = t.o), t *= 360; var n, a, s, o, l; return t = t % 360 / 60, l = r * e, o = l * (1 - V(t % 2 - 1)), n = a = s = r - l, t = ~~t, n += [l, o, 0, 0, o, l][t], a += [o, l, l, o, 0, 0][t], s += [0, 0, o, l, l, o][t], Be(n, a, s, i) }, r.hsl2rgb = function (t, e, r, i) { this.is(t, "object") && "h" in t && "s" in t && "l" in t && (r = t.l, e = t.s, t = t.h), (t > 1 || e > 1 || r > 1) && (t /= 360, e /= 100, r /= 100), t *= 360; var n, a, s, o, l; return t = t % 360 / 60, l = 2 * e * (.5 > r ? r : 1 - r), o = l * (1 - V(t % 2 - 1)), n = a = s = r - l / 2, t = ~~t, n += [l, o, 0, 0, o, l][t], a += [o, l, l, o, 0, 0][t], s += [0, 0, o, l, l, o][t], Be(n, a, s, i) }, r.rgb2hsb = function (t, e, r) { r = Ce(t, e, r), t = r[0], e = r[1], r = r[2]; var i, n, a, s; return a = D(t, e, r), s = a - O(t, e, r), i = 0 == s ? null : a == t ? (e - r) / s : a == e ? (r - t) / s + 2 : (t - e) / s + 4, i = 60 * ((i + 360) % 6) / 360, n = 0 == s ? 0 : s / a, { h: i, s: n, b: a, toString: _e } }, r.rgb2hsl = function (t, e, r) { r = Ce(t, e, r), t = r[0], e = r[1], r = r[2]; var i, n, a, s, o, l; return s = D(t, e, r), o = O(t, e, r), l = s - o, i = 0 == l ? null : s == t ? (e - r) / l : s == e ? (r - t) / l + 2 : (t - e) / l + 4, i = 60 * ((i + 360) % 6) / 360, a = (s + o) / 2, n = 0 == l ? 0 : .5 > a ? l / (2 * a) : l / (2 - 2 * a), { h: i, s: n, l: a, toString: we } }, r._path2string = function () { return this.join(",").replace(se, "$1") }, r._preload = function (t, e) { var r = S.doc.createElement("img"); r.style.cssText = "position:absolute;left:-9999em;top:-9999em", r.onload = function () { e.call(this), this.onload = null, S.doc.body.removeChild(this) }, r.onerror = function () { S.doc.body.removeChild(this) }, S.doc.body.appendChild(r), r.src = t }, r.getRGB = a(function (t) { if (!t || (t = F(t)).indexOf("-") + 1) return { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: s }; if ("none" == t) return { r: -1, g: -1, b: -1, hex: "none", toString: s }; !(ae[B](t.toLowerCase().substring(0, 2)) || "#" == t.charAt()) && (t = be(t)); var e, i, n, a, o, l, h = t.match($); return h ? (h[2] && (n = te(h[2].substring(5), 16), i = te(h[2].substring(3, 5), 16), e = te(h[2].substring(1, 3), 16)), h[3] && (n = te((o = h[3].charAt(3)) + o, 16), i = te((o = h[3].charAt(2)) + o, 16), e = te((o = h[3].charAt(1)) + o, 16)), h[4] && (l = h[4][P](ne), e = K(l[0]), "%" == l[0].slice(-1) && (e *= 2.55), i = K(l[1]), "%" == l[1].slice(-1) && (i *= 2.55), n = K(l[2]), "%" == l[2].slice(-1) && (n *= 2.55), "rgba" == h[1].toLowerCase().slice(0, 4) && (a = K(l[3])), l[3] && "%" == l[3].slice(-1) && (a /= 100)), h[5] ? (l = h[5][P](ne), e = K(l[0]), "%" == l[0].slice(-1) && (e *= 2.55), i = K(l[1]), "%" == l[1].slice(-1) && (i *= 2.55), n = K(l[2]), "%" == l[2].slice(-1) && (n *= 2.55), ("deg" == l[0].slice(-3) || "°" == l[0].slice(-1)) && (e /= 360), "hsba" == h[1].toLowerCase().slice(0, 4) && (a = K(l[3])), l[3] && "%" == l[3].slice(-1) && (a /= 100), r.hsb2rgb(e, i, n, a)) : h[6] ? (l = h[6][P](ne), e = K(l[0]), "%" == l[0].slice(-1) && (e *= 2.55), i = K(l[1]), "%" == l[1].slice(-1) && (i *= 2.55), n = K(l[2]), "%" == l[2].slice(-1) && (n *= 2.55), ("deg" == l[0].slice(-3) || "°" == l[0].slice(-1)) && (e /= 360), "hsla" == h[1].toLowerCase().slice(0, 4) && (a = K(l[3])), l[3] && "%" == l[3].slice(-1) && (a /= 100), r.hsl2rgb(e, i, n, a)) : (h = { r: e, g: i, b: n, toString: s }, h.hex = "#" + (16777216 | n | i << 8 | e << 16).toString(16).slice(1), r.is(a, "finite") && (h.opacity = a), h)) : { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: s } }, r), r.hsb = a(function (t, e, i) { return r.hsb2rgb(t, e, i).hex }), r.hsl = a(function (t, e, i) { return r.hsl2rgb(t, e, i).hex }), r.rgb = a(function (t, e, r) { return "#" + (16777216 | r | e << 8 | t << 16).toString(16).slice(1) }), r.getColor = function (t) { var e = this.getColor.start = this.getColor.start || { h: 0, s: 1, b: t || .75 }, r = this.hsb2rgb(e.h, e.s, e.b); return e.h += .075, e.h > 1 && (e.h = 0, e.s -= .2, 0 >= e.s && (this.getColor.start = { h: 0, s: 1, b: e.b })), r.hex }, r.getColor.reset = function () { delete this.start }, r.parsePathString = function (t) { if (!t) return null; var e = Se(t); if (e.arr) return Ae(e.arr); var i = { a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0 }, n = []; return r.is(t, H) && r.is(t[0], H) && (n = Ae(t)), n.length || F(t).replace(oe, function (t, e, r) { var a = [], s = e.toLowerCase(); if (r.replace(he, function (t, e) { e && a.push(+e) }), "m" == s && a.length > 2 && (n.push([e][E](a.splice(0, 2))), s = "l", e = "m" == e ? "l" : "L"), "r" == s) n.push([e][E](a)); else for (; a.length >= i[s] && (n.push([e][E](a.splice(0, i[s]))), i[s]) ;); }), n.toString = r._path2string, e.arr = Ae(n), n }, r.parseTransformString = a(function (t) { if (!t) return null; var e = []; return r.is(t, H) && r.is(t[0], H) && (e = Ae(t)), e.length || F(t).replace(le, function (t, r, i) { var n = []; j.call(r), i.replace(he, function (t, e) { e && n.push(+e) }), e.push([r][E](n)) }), e.toString = r._path2string, e }); var Se = function (t) { var e = Se.ps = Se.ps || {}; return e[t] ? e[t].sleep = 100 : e[t] = { sleep: 100 }, setTimeout(function () { for (var r in e) e[B](r) && r != t && (e[r].sleep--, !e[r].sleep && delete e[r]) }), e[t] }; r.findDotsAtSegment = function (t, e, r, i, n, a, s, o, l) { var h = 1 - l, u = Y(h, 3), c = Y(h, 2), f = l * l, p = f * l, d = u * t + 3 * c * l * r + 3 * h * l * l * n + p * s, g = u * e + 3 * c * l * i + 3 * h * l * l * a + p * o, x = t + 2 * l * (r - t) + f * (n - 2 * r + t), v = e + 2 * l * (i - e) + f * (a - 2 * i + e), y = r + 2 * l * (n - r) + f * (s - 2 * n + r), m = i + 2 * l * (a - i) + f * (o - 2 * a + i), b = h * t + l * r, _ = h * e + l * i, w = h * n + l * s, k = h * a + l * o, C = 90 - 180 * q.atan2(x - y, v - m) / G; return (x > y || m > v) && (C += 180), { x: d, y: g, m: { x: x, y: v }, n: { x: y, y: m }, start: { x: b, y: _ }, end: { x: w, y: k }, alpha: C } }, r.bezierBBox = function (t, e, i, n, a, s, o, l) { r.is(t, "array") || (t = [t, e, i, n, a, s, o, l]); var h = Pe.apply(null, t); return { x: h.min.x, y: h.min.y, x2: h.max.x, y2: h.max.y, width: h.max.x - h.min.x, height: h.max.y - h.min.y } }, r.isPointInsideBBox = function (t, e, r) { return e >= t.x && t.x2 >= e && r >= t.y && t.y2 >= r }, r.isBBoxIntersect = function (t, e) { var i = r.isPointInsideBBox; return i(e, t.x, t.y) || i(e, t.x2, t.y) || i(e, t.x, t.y2) || i(e, t.x2, t.y2) || i(t, e.x, e.y) || i(t, e.x2, e.y) || i(t, e.x, e.y2) || i(t, e.x2, e.y2) || (t.x < e.x2 && t.x > e.x || e.x < t.x2 && e.x > t.x) && (t.y < e.y2 && t.y > e.y || e.y < t.y2 && e.y > t.y) }, r.pathIntersection = function (t, e) { return p(t, e) }, r.pathIntersectionNumber = function (t, e) { return p(t, e, 1) }, r.isPointInsidePath = function (t, e, i) { var n = r.pathBBox(t); return r.isPointInsideBBox(n, e, i) && 1 == p(t, [["M", e, i], ["H", n.x2 + 10]], 1) % 2 }, r._removedFactory = function (t) { return function () { e("raphael.log", null, "Raphaël: you are calling to method “" + t + "” of removed object", t) } }; var Te = r.pathBBox = function (t) { var e = Se(t); if (e.bbox) return i(e.bbox); if (!t) return { x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0 }; t = Re(t); for (var r, n = 0, a = 0, s = [], o = [], l = 0, h = t.length; h > l; l++) if (r = t[l], "M" == r[0]) n = r[1], a = r[2], s.push(n), o.push(a); else { var u = Pe(n, a, r[1], r[2], r[3], r[4], r[5], r[6]); s = s[E](u.min.x, u.max.x), o = o[E](u.min.y, u.max.y), n = r[5], a = r[6] } var c = O[N](0, s), f = O[N](0, o), p = D[N](0, s), d = D[N](0, o), g = p - c, x = d - f, v = { x: c, y: f, x2: p, y2: d, width: g, height: x, cx: c + g / 2, cy: f + x / 2 }; return e.bbox = i(v), v }, Ae = function (t) { var e = i(t); return e.toString = r._path2string, e }, Ne = r._pathToRelative = function (t) { var e = Se(t); if (e.rel) return Ae(e.rel); r.is(t, H) && r.is(t && t[0], H) || (t = r.parsePathString(t)); var i = [], n = 0, a = 0, s = 0, o = 0, l = 0; "M" == t[0][0] && (n = t[0][1], a = t[0][2], s = n, o = a, l++, i.push(["M", n, a])); for (var h = l, u = t.length; u > h; h++) { var c = i[h] = [], f = t[h]; if (f[0] != j.call(f[0])) switch (c[0] = j.call(f[0]), c[0]) { case "a": c[1] = f[1], c[2] = f[2], c[3] = f[3], c[4] = f[4], c[5] = f[5], c[6] = +(f[6] - n).toFixed(3), c[7] = +(f[7] - a).toFixed(3); break; case "v": c[1] = +(f[1] - a).toFixed(3); break; case "m": s = f[1], o = f[2]; default: for (var p = 1, d = f.length; d > p; p++) c[p] = +(f[p] - (p % 2 ? n : a)).toFixed(3) } else { c = i[h] = [], "m" == f[0] && (s = f[1] + n, o = f[2] + a); for (var g = 0, x = f.length; x > g; g++) i[h][g] = f[g] } var v = i[h].length; switch (i[h][0]) { case "z": n = s, a = o; break; case "h": n += +i[h][v - 1]; break; case "v": a += +i[h][v - 1]; break; default: n += +i[h][v - 2], a += +i[h][v - 1] } } return i.toString = r._path2string, e.rel = Ae(i), i }, Ee = r._pathToAbsolute = function (t) { var e = Se(t); if (e.abs) return Ae(e.abs); if (r.is(t, H) && r.is(t && t[0], H) || (t = r.parsePathString(t)), !t || !t.length) return [["M", 0, 0]]; var i = [], n = 0, a = 0, s = 0, l = 0, h = 0; "M" == t[0][0] && (n = +t[0][1], a = +t[0][2], s = n, l = a, h++, i[0] = ["M", n, a]); for (var u, c, f = 3 == t.length && "M" == t[0][0] && "R" == t[1][0].toUpperCase() && "Z" == t[2][0].toUpperCase(), p = h, d = t.length; d > p; p++) { if (i.push(u = []), c = t[p], c[0] != ee.call(c[0])) switch (u[0] = ee.call(c[0]), u[0]) { case "A": u[1] = c[1], u[2] = c[2], u[3] = c[3], u[4] = c[4], u[5] = c[5], u[6] = +(c[6] + n), u[7] = +(c[7] + a); break; case "V": u[1] = +c[1] + a; break; case "H": u[1] = +c[1] + n; break; case "R": for (var g = [n, a][E](c.slice(1)), x = 2, v = g.length; v > x; x++) g[x] = +g[x] + n, g[++x] = +g[x] + a; i.pop(), i = i[E](o(g, f)); break; case "M": s = +c[1] + n, l = +c[2] + a; default: for (x = 1, v = c.length; v > x; x++) u[x] = +c[x] + (x % 2 ? n : a) } else if ("R" == c[0]) g = [n, a][E](c.slice(1)), i.pop(), i = i[E](o(g, f)), u = ["R"][E](c.slice(-2)); else for (var y = 0, m = c.length; m > y; y++) u[y] = c[y]; switch (u[0]) { case "Z": n = s, a = l; break; case "H": n = u[1]; break; case "V": a = u[1]; break; case "M": s = u[u.length - 2], l = u[u.length - 1]; default: n = u[u.length - 2], a = u[u.length - 1] } } return i.toString = r._path2string, e.abs = Ae(i), i }, Le = function (t, e, r, i) { return [t, e, r, i, r, i] }, Me = function (t, e, r, i, n, a) { var s = 1 / 3, o = 2 / 3; return [s * t + o * r, s * e + o * i, s * n + o * r, s * a + o * i, n, a] }, ze = function (t, e, r, i, n, s, o, l, h, u) { var c, f = 120 * G / 180, p = G / 180 * (+n || 0), d = [], g = a(function (t, e, r) { var i = t * q.cos(r) - e * q.sin(r), n = t * q.sin(r) + e * q.cos(r); return { x: i, y: n } }); if (u) C = u[0], B = u[1], w = u[2], k = u[3]; else { c = g(t, e, -p), t = c.x, e = c.y, c = g(l, h, -p), l = c.x, h = c.y; var x = (q.cos(G / 180 * n), q.sin(G / 180 * n), (t - l) / 2), v = (e - h) / 2, y = x * x / (r * r) + v * v / (i * i); y > 1 && (y = q.sqrt(y), r = y * r, i = y * i); var m = r * r, b = i * i, _ = (s == o ? -1 : 1) * q.sqrt(V((m * b - m * v * v - b * x * x) / (m * v * v + b * x * x))), w = _ * r * v / i + (t + l) / 2, k = _ * -i * x / r + (e + h) / 2, C = q.asin(((e - k) / i).toFixed(9)), B = q.asin(((h - k) / i).toFixed(9)); C = w > t ? G - C : C, B = w > l ? G - B : B, 0 > C && (C = 2 * G + C), 0 > B && (B = 2 * G + B), o && C > B && (C -= 2 * G), !o && B > C && (B -= 2 * G) } var S = B - C; if (V(S) > f) { var T = B, A = l, N = h; B = C + f * (o && B > C ? 1 : -1), l = w + r * q.cos(B), h = k + i * q.sin(B), d = ze(l, h, r, i, n, 0, o, A, N, [B, T, w, k]) } S = B - C; var L = q.cos(C), M = q.sin(C), z = q.cos(B), F = q.sin(B), R = q.tan(S / 4), I = 4 / 3 * r * R, j = 4 / 3 * i * R, D = [t, e], O = [t + I * M, e - j * L], Y = [l + I * F, h - j * z], W = [l, h]; if (O[0] = 2 * D[0] - O[0], O[1] = 2 * D[1] - O[1], u) return [O, Y, W][E](d); d = [O, Y, W][E](d).join()[P](","); for (var X = [], H = 0, U = d.length; U > H; H++) X[H] = H % 2 ? g(d[H - 1], d[H], p).y : g(d[H], d[H + 1], p).x; return X }, Fe = function (t, e, r, i, n, a, s, o, l) { var h = 1 - l; return { x: Y(h, 3) * t + 3 * Y(h, 2) * l * r + 3 * h * l * l * n + Y(l, 3) * s, y: Y(h, 3) * e + 3 * Y(h, 2) * l * i + 3 * h * l * l * a + Y(l, 3) * o } }, Pe = a(function (t, e, r, i, n, a, s, o) { var l, h = n - 2 * r + t - (s - 2 * n + r), u = 2 * (r - t) - 2 * (n - r), c = t - r, f = (-u + q.sqrt(u * u - 4 * h * c)) / 2 / h, p = (-u - q.sqrt(u * u - 4 * h * c)) / 2 / h, d = [e, o], g = [t, s]; return V(f) > "1e12" && (f = .5), V(p) > "1e12" && (p = .5), f > 0 && 1 > f && (l = Fe(t, e, r, i, n, a, s, o, f), g.push(l.x), d.push(l.y)), p > 0 && 1 > p && (l = Fe(t, e, r, i, n, a, s, o, p), g.push(l.x), d.push(l.y)), h = a - 2 * i + e - (o - 2 * a + i), u = 2 * (i - e) - 2 * (a - i), c = e - i, f = (-u + q.sqrt(u * u - 4 * h * c)) / 2 / h, p = (-u - q.sqrt(u * u - 4 * h * c)) / 2 / h, V(f) > "1e12" && (f = .5), V(p) > "1e12" && (p = .5), f > 0 && 1 > f && (l = Fe(t, e, r, i, n, a, s, o, f), g.push(l.x), d.push(l.y)), p > 0 && 1 > p && (l = Fe(t, e, r, i, n, a, s, o, p), g.push(l.x), d.push(l.y)), { min: { x: O[N](0, g), y: O[N](0, d) }, max: { x: D[N](0, g), y: D[N](0, d) } } }), Re = r._path2curve = a(function (t, e) { var r = !e && Se(t); if (!e && r.curve) return Ae(r.curve); for (var i = Ee(t), n = e && Ee(e), a = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, s = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, o = (function (t, e) { var r, i; if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y]; switch (!(t[0] in { T: 1, Q: 1 }) && (e.qx = e.qy = null), t[0]) { case "M": e.X = t[1], e.Y = t[2]; break; case "A": t = ["C"][E](ze[N](0, [e.x, e.y][E](t.slice(1)))); break; case "S": r = e.x + (e.x - (e.bx || e.x)), i = e.y + (e.y - (e.by || e.y)), t = ["C", r, i][E](t.slice(1)); break; case "T": e.qx = e.x + (e.x - (e.qx || e.x)), e.qy = e.y + (e.y - (e.qy || e.y)), t = ["C"][E](Me(e.x, e.y, e.qx, e.qy, t[1], t[2])); break; case "Q": e.qx = t[1], e.qy = t[2], t = ["C"][E](Me(e.x, e.y, t[1], t[2], t[3], t[4])); break; case "L": t = ["C"][E](Le(e.x, e.y, t[1], t[2])); break; case "H": t = ["C"][E](Le(e.x, e.y, t[1], e.y)); break; case "V": t = ["C"][E](Le(e.x, e.y, e.x, t[1])); break; case "Z": t = ["C"][E](Le(e.x, e.y, e.X, e.Y)) } return t }), l = function (t, e) { if (t[e].length > 7) { t[e].shift(); for (var r = t[e]; r.length;) t.splice(e++, 0, ["C"][E](r.splice(0, 6))); t.splice(e, 1), c = D(i.length, n && n.length || 0) } }, h = function (t, e, r, a, s) { t && e && "M" == t[s][0] && "M" != e[s][0] && (e.splice(s, 0, ["M", a.x, a.y]), r.bx = 0, r.by = 0, r.x = t[s][1], r.y = t[s][2], c = D(i.length, n && n.length || 0)) }, u = 0, c = D(i.length, n && n.length || 0) ; c > u; u++) { i[u] = o(i[u], a), l(i, u), n && (n[u] = o(n[u], s)), n && l(n, u), h(i, n, a, s, u), h(n, i, s, a, u); var f = i[u], p = n && n[u], d = f.length, g = n && p.length; a.x = f[d - 2], a.y = f[d - 1], a.bx = K(f[d - 4]) || a.x, a.by = K(f[d - 3]) || a.y, s.bx = n && (K(p[g - 4]) || s.x), s.by = n && (K(p[g - 3]) || s.y), s.x = n && p[g - 2], s.y = n && p[g - 1] } return n || (r.curve = Ae(i)), n ? [i, n] : i }, null, Ae), Ie = (r._parseDots = a(function (t) { for (var e = [], i = 0, n = t.length; n > i; i++) { var a = {}, s = t[i].match(/^([^:]*):?([\d\.]*)/); if (a.color = r.getRGB(s[1]), a.color.error) return null; a.color = a.color.hex, s[2] && (a.offset = s[2] + "%"), e.push(a) } for (i = 1, n = e.length - 1; n > i; i++) if (!e[i].offset) { for (var o = K(e[i - 1].offset || 0), l = 0, h = i + 1; n > h; h++) if (e[h].offset) { l = e[h].offset; break } l || (l = 100, h = n), l = K(l); for (var u = (l - o) / (h - i + 1) ; h > i; i++) o += u, e[i].offset = o + "%" } return e }), r._tear = function (t, e) { t == e.top && (e.top = t.prev), t == e.bottom && (e.bottom = t.next), t.next && (t.next.prev = t.prev), t.prev && (t.prev.next = t.next) }), je = (r._tofront = function (t, e) { e.top !== t && (Ie(t, e), t.next = null, t.prev = e.top, e.top.next = t, e.top = t) }, r._toback = function (t, e) { e.bottom !== t && (Ie(t, e), t.next = e.bottom, t.prev = null, e.bottom.prev = t, e.bottom = t) }, r._insertafter = function (t, e, r) { Ie(t, r), e == r.top && (r.top = t), e.next && (e.next.prev = t), t.next = e.next, t.prev = e, e.next = t }, r._insertbefore = function (t, e, r) { Ie(t, r), e == r.bottom && (r.bottom = t), e.prev && (e.prev.next = t), t.prev = e.prev, e.prev = t, t.next = e }, r.toMatrix = function (t, e) { var r = Te(t), i = { _: { transform: M }, getBBox: function () { return r } }; return qe(i, e), i.matrix }), qe = (r.transformPath = function (t, e) { return ve(t, je(t, e)) }, r._extractTransform = function (t, e) { if (null == e) return t._.transform; e = F(e).replace(/\.{3}|\u2026/g, t._.transform || M); var i = r.parseTransformString(e), n = 0, a = 0, s = 0, o = 1, l = 1, h = t._, u = new d; if (h.transform = i || [], i) for (var c = 0, f = i.length; f > c; c++) { var p, g, x, v, y, m = i[c], b = m.length, _ = F(m[0]).toLowerCase(), w = m[0] != _, k = w ? u.invert() : 0; "t" == _ && 3 == b ? w ? (p = k.x(0, 0), g = k.y(0, 0), x = k.x(m[1], m[2]), v = k.y(m[1], m[2]), u.translate(x - p, v - g)) : u.translate(m[1], m[2]) : "r" == _ ? 2 == b ? (y = y || t.getBBox(1), u.rotate(m[1], y.x + y.width / 2, y.y + y.height / 2), n += m[1]) : 4 == b && (w ? (x = k.x(m[2], m[3]), v = k.y(m[2], m[3]), u.rotate(m[1], x, v)) : u.rotate(m[1], m[2], m[3]), n += m[1]) : "s" == _ ? 2 == b || 3 == b ? (y = y || t.getBBox(1), u.scale(m[1], m[b - 1], y.x + y.width / 2, y.y + y.height / 2), o *= m[1], l *= m[b - 1]) : 5 == b && (w ? (x = k.x(m[3], m[4]), v = k.y(m[3], m[4]), u.scale(m[1], m[2], x, v)) : u.scale(m[1], m[2], m[3], m[4]), o *= m[1], l *= m[2]) : "m" == _ && 7 == b && u.add(m[1], m[2], m[3], m[4], m[5], m[6]), h.dirtyT = 1, t.matrix = u } t.matrix = u, h.sx = o, h.sy = l, h.deg = n, h.dx = a = u.e, h.dy = s = u.f, 1 == o && 1 == l && !n && h.bbox ? (h.bbox.x += +a, h.bbox.y += +s) : h.dirtyT = 1 }), De = function (t) { var e = t[0]; switch (e.toLowerCase()) { case "t": return [e, 0, 0]; case "m": return [e, 1, 0, 0, 1, 0, 0]; case "r": return 4 == t.length ? [e, 0, t[2], t[3]] : [e, 0]; case "s": return 5 == t.length ? [e, 1, 1, t[3], t[4]] : 3 == t.length ? [e, 1, 1] : [e, 1] } }, Oe = r._equaliseTransform = function (t, e) {
        e = F(e).replace(/\.{3}|\u2026/g, t), t = r.parseTransformString(t) || [], e = r.parseTransformString(e) || []; for (var i, n, a, s, o = D(t.length, e.length), l = [], h = [], u = 0; o > u; u++) { if (a = t[u] || De(e[u]), s = e[u] || De(a), a[0] != s[0] || "r" == a[0].toLowerCase() && (a[2] != s[2] || a[3] != s[3]) || "s" == a[0].toLowerCase() && (a[3] != s[3] || a[4] != s[4])) return; for (l[u] = [], h[u] = [], i = 0, n = D(a.length, s.length) ; n > i; i++) i in a && (l[u][i] = a[i]), i in s && (h[u][i] = s[i]) } return { from: l, to: h }
    }; r._getContainer = function (t, e, i, n) { var a; return a = null != n || r.is(t, "object") ? t : S.doc.getElementById(t), null != a ? a.tagName ? null == e ? { container: a, width: a.style.pixelWidth || a.offsetWidth, height: a.style.pixelHeight || a.offsetHeight } : { container: a, width: e, height: i } : { container: 1, x: t, y: e, width: i, height: n } : void 0 }, r.pathToRelative = Ne, r._engine = {}, r.path2curve = Re, r.matrix = function (t, e, r, i, n, a) { return new d(t, e, r, i, n, a) }, function (t) { function e(t) { return t[0] * t[0] + t[1] * t[1] } function i(t) { var r = q.sqrt(e(t)); t[0] && (t[0] /= r), t[1] && (t[1] /= r) } t.add = function (t, e, r, i, n, a) { var s, o, l, h, u = [[], [], []], c = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]], f = [[t, r, n], [e, i, a], [0, 0, 1]]; for (t && t instanceof d && (f = [[t.a, t.c, t.e], [t.b, t.d, t.f], [0, 0, 1]]), s = 0; 3 > s; s++) for (o = 0; 3 > o; o++) { for (h = 0, l = 0; 3 > l; l++) h += c[s][l] * f[l][o]; u[s][o] = h } this.a = u[0][0], this.b = u[1][0], this.c = u[0][1], this.d = u[1][1], this.e = u[0][2], this.f = u[1][2] }, t.invert = function () { var t = this, e = t.a * t.d - t.b * t.c; return new d(t.d / e, -t.b / e, -t.c / e, t.a / e, (t.c * t.f - t.d * t.e) / e, (t.b * t.e - t.a * t.f) / e) }, t.clone = function () { return new d(this.a, this.b, this.c, this.d, this.e, this.f) }, t.translate = function (t, e) { this.add(1, 0, 0, 1, t, e) }, t.scale = function (t, e, r, i) { null == e && (e = t), (r || i) && this.add(1, 0, 0, 1, r, i), this.add(t, 0, 0, e, 0, 0), (r || i) && this.add(1, 0, 0, 1, -r, -i) }, t.rotate = function (t, e, i) { t = r.rad(t), e = e || 0, i = i || 0; var n = +q.cos(t).toFixed(9), a = +q.sin(t).toFixed(9); this.add(n, a, -a, n, e, i), this.add(1, 0, 0, 1, -e, -i) }, t.x = function (t, e) { return t * this.a + e * this.c + this.e }, t.y = function (t, e) { return t * this.b + e * this.d + this.f }, t.get = function (t) { return +this[F.fromCharCode(97 + t)].toFixed(4) }, t.toString = function () { return r.svg ? "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" : [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join() }, t.toFilter = function () { return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) + ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) + ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod='auto expand')" }, t.offset = function () { return [this.e.toFixed(4), this.f.toFixed(4)] }, t.split = function () { var t = {}; t.dx = this.e, t.dy = this.f; var n = [[this.a, this.c], [this.b, this.d]]; t.scalex = q.sqrt(e(n[0])), i(n[0]), t.shear = n[0][0] * n[1][0] + n[0][1] * n[1][1], n[1] = [n[1][0] - n[0][0] * t.shear, n[1][1] - n[0][1] * t.shear], t.scaley = q.sqrt(e(n[1])), i(n[1]), t.shear /= t.scaley; var a = -n[0][1], s = n[1][1]; return 0 > s ? (t.rotate = r.deg(q.acos(s)), 0 > a && (t.rotate = 360 - t.rotate)) : t.rotate = r.deg(q.asin(a)), t.isSimple = !(+t.shear.toFixed(9) || t.scalex.toFixed(9) != t.scaley.toFixed(9) && t.rotate), t.isSuperSimple = !+t.shear.toFixed(9) && t.scalex.toFixed(9) == t.scaley.toFixed(9) && !t.rotate, t.noRotation = !+t.shear.toFixed(9) && !t.rotate, t }, t.toTransformString = function (t) { var e = t || this[P](); return e.isSimple ? (e.scalex = +e.scalex.toFixed(4), e.scaley = +e.scaley.toFixed(4), e.rotate = +e.rotate.toFixed(4), (e.dx || e.dy ? "t" + [e.dx, e.dy] : M) + (1 != e.scalex || 1 != e.scaley ? "s" + [e.scalex, e.scaley, 0, 0] : M) + (e.rotate ? "r" + [e.rotate, 0, 0] : M)) : "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)] } }(d.prototype); var Ve = navigator.userAgent.match(/Version\/(.*?)\s/) || navigator.userAgent.match(/Chrome\/(\d+)/); _.safari = "Apple Computer, Inc." == navigator.vendor && (Ve && 4 > Ve[1] || "iP" == navigator.platform.slice(0, 2)) || "Google Inc." == navigator.vendor && Ve && 8 > Ve[1] ? function () { var t = this.rect(-99, -99, this.width + 99, this.height + 99).attr({ stroke: "none" }); setTimeout(function () { t.remove() }) } : fe; for (var Ye = function () { this.returnValue = !1 }, Ge = function () { return this.originalEvent.preventDefault() }, We = function () { this.cancelBubble = !0 }, Xe = function () { return this.originalEvent.stopPropagation() }, He = function () { return S.doc.addEventListener ? function (t, e, r, i) { var n = L && I[e] ? I[e] : e, a = function (n) { var a = S.doc.documentElement.scrollTop || S.doc.body.scrollTop, s = S.doc.documentElement.scrollLeft || S.doc.body.scrollLeft, o = n.clientX + s, l = n.clientY + a; if (L && I[B](e)) for (var h = 0, u = n.targetTouches && n.targetTouches.length; u > h; h++) if (n.targetTouches[h].target == t) { var c = n; n = n.targetTouches[h], n.originalEvent = c, n.preventDefault = Ge, n.stopPropagation = Xe; break } return r.call(i, n, o, l) }; return t.addEventListener(n, a, !1), function () { return t.removeEventListener(n, a, !1), !0 } } : S.doc.attachEvent ? function (t, e, r, i) { var n = function (t) { t = t || S.win.event; var e = S.doc.documentElement.scrollTop || S.doc.body.scrollTop, n = S.doc.documentElement.scrollLeft || S.doc.body.scrollLeft, a = t.clientX + n, s = t.clientY + e; return t.preventDefault = t.preventDefault || Ye, t.stopPropagation = t.stopPropagation || We, r.call(i, t, a, s) }; t.attachEvent("on" + e, n); var a = function () { return t.detachEvent("on" + e, n), !0 }; return a } : void 0 }(), Ue = [], $e = function (t) { for (var r, i = t.clientX, n = t.clientY, a = S.doc.documentElement.scrollTop || S.doc.body.scrollTop, s = S.doc.documentElement.scrollLeft || S.doc.body.scrollLeft, o = Ue.length; o--;) { if (r = Ue[o], L) { for (var l, h = t.touches.length; h--;) if (l = t.touches[h], l.identifier == r.el._drag.id) { i = l.clientX, n = l.clientY, (t.originalEvent ? t.originalEvent : t).preventDefault(); break } } else t.preventDefault(); var u, c = r.el.node, f = c.nextSibling, p = c.parentNode, d = c.style.display; S.win.opera && p.removeChild(c), c.style.display = "none", u = r.el.paper.getElementByPoint(i, n), c.style.display = d, S.win.opera && (f ? p.insertBefore(c, f) : p.appendChild(c)), u && e("raphael.drag.over." + r.el.id, r.el, u), i += s, n += a, e("raphael.drag.move." + r.el.id, r.move_scope || r.el, i - r.el._drag.x, n - r.el._drag.y, i, n, t) } }, Ze = function (t) { r.unmousemove($e).unmouseup(Ze); for (var i, n = Ue.length; n--;) i = Ue[n], i.el._drag = {}, e("raphael.drag.end." + i.el.id, i.end_scope || i.start_scope || i.move_scope || i.el, t); Ue = [] }, Qe = r.el = {}, Je = R.length; Je--;) (function (t) { r[t] = Qe[t] = function (e, i) { return r.is(e, "function") && (this.events = this.events || [], this.events.push({ name: t, f: e, unbind: He(this.shape || this.node || S.doc, t, e, i || this) })), this }, r["un" + t] = Qe["un" + t] = function (e) { for (var i = this.events || [], n = i.length; n--;) i[n].name != t || !r.is(e, "undefined") && i[n].f != e || (i[n].unbind(), i.splice(n, 1), !i.length && delete this.events); return this } })(R[Je]); Qe.data = function (t, i) { var n = ue[this.id] = ue[this.id] || {}; if (0 == arguments.length) return n; if (1 == arguments.length) { if (r.is(t, "object")) { for (var a in t) t[B](a) && this.data(a, t[a]); return this } return e("raphael.data.get." + this.id, this, n[t], t), n[t] } return n[t] = i, e("raphael.data.set." + this.id, this, i, t), this }, Qe.removeData = function (t) { return null == t ? ue[this.id] = {} : ue[this.id] && delete ue[this.id][t], this }, Qe.getData = function () { return i(ue[this.id] || {}) }, Qe.hover = function (t, e, r, i) { return this.mouseover(t, r).mouseout(e, i || r) }, Qe.unhover = function (t, e) { return this.unmouseover(t).unmouseout(e) }; var Ke = []; Qe.drag = function (t, i, n, a, s, o) { function l(l) { (l.originalEvent || l).preventDefault(); var h = S.doc.documentElement.scrollTop || S.doc.body.scrollTop, u = S.doc.documentElement.scrollLeft || S.doc.body.scrollLeft; this._drag.x = l.clientX + u, this._drag.y = l.clientY + h, this._drag.id = l.identifier, !Ue.length && r.mousemove($e).mouseup(Ze), Ue.push({ el: this, move_scope: a, start_scope: s, end_scope: o }), i && e.on("raphael.drag.start." + this.id, i), t && e.on("raphael.drag.move." + this.id, t), n && e.on("raphael.drag.end." + this.id, n), e("raphael.drag.start." + this.id, s || a || this, l.clientX + u, l.clientY + h, l) } return this._drag = {}, Ke.push({ el: this, start: l }), this.mousedown(l), this }, Qe.onDragOver = function (t) { t ? e.on("raphael.drag.over." + this.id, t) : e.unbind("raphael.drag.over." + this.id) }, Qe.undrag = function () { for (var t = Ke.length; t--;) Ke[t].el == this && (this.unmousedown(Ke[t].start), Ke.splice(t, 1), e.unbind("raphael.drag.*." + this.id)); !Ke.length && r.unmousemove($e).unmouseup(Ze), Ue = [] }, _.circle = function (t, e, i) { var n = r._engine.circle(this, t || 0, e || 0, i || 0); return this.__set__ && this.__set__.push(n), n }, _.rect = function (t, e, i, n, a) { var s = r._engine.rect(this, t || 0, e || 0, i || 0, n || 0, a || 0); return this.__set__ && this.__set__.push(s), s }, _.ellipse = function (t, e, i, n) { var a = r._engine.ellipse(this, t || 0, e || 0, i || 0, n || 0); return this.__set__ && this.__set__.push(a), a }, _.path = function (t) { t && !r.is(t, X) && !r.is(t[0], H) && (t += M); var e = r._engine.path(r.format[N](r, arguments), this); return this.__set__ && this.__set__.push(e), e }, _.image = function (t, e, i, n, a) { var s = r._engine.image(this, t || "about:blank", e || 0, i || 0, n || 0, a || 0); return this.__set__ && this.__set__.push(s), s }, _.text = function (t, e, i) { var n = r._engine.text(this, t || 0, e || 0, F(i)); return this.__set__ && this.__set__.push(n), n }, _.set = function (t) { !r.is(t, "array") && (t = Array.prototype.splice.call(arguments, 0, arguments.length)); var e = new cr(t); return this.__set__ && this.__set__.push(e), e.paper = this, e.type = "set", e }, _.setStart = function (t) { this.__set__ = t || this.set() }, _.setFinish = function () { var t = this.__set__; return delete this.__set__, t }, _.setSize = function (t, e) { return r._engine.setSize.call(this, t, e) }, _.setViewBox = function (t, e, i, n, a) { return r._engine.setViewBox.call(this, t, e, i, n, a) }, _.top = _.bottom = null, _.raphael = r; var tr = function (t) { var e = t.getBoundingClientRect(), r = t.ownerDocument, i = r.body, n = r.documentElement, a = n.clientTop || i.clientTop || 0, s = n.clientLeft || i.clientLeft || 0, o = e.top + (S.win.pageYOffset || n.scrollTop || i.scrollTop) - a, l = e.left + (S.win.pageXOffset || n.scrollLeft || i.scrollLeft) - s; return { y: o, x: l } }; _.getElementByPoint = function (t, e) { var r = this, i = r.canvas, n = S.doc.elementFromPoint(t, e); if (S.win.opera && "svg" == n.tagName) { var a = tr(i), s = i.createSVGRect(); s.x = t - a.x, s.y = e - a.y, s.width = s.height = 1; var o = i.getIntersectionList(s, null); o.length && (n = o[o.length - 1]) } if (!n) return null; for (; n.parentNode && n != i.parentNode && !n.raphael;) n = n.parentNode; return n == r.canvas.parentNode && (n = i), n = n && n.raphael ? r.getById(n.raphaelid) : null }, _.getElementsByBBox = function (t) { var e = this.set(); return this.forEach(function (i) { r.isBBoxIntersect(i.getBBox(), t) && e.push(i) }), e }, _.getById = function (t) { for (var e = this.bottom; e;) { if (e.id == t) return e; e = e.next } return null }, _.forEach = function (t, e) { for (var r = this.bottom; r;) { if (t.call(e, r) === !1) return this; r = r.next } return this }, _.getElementsByPoint = function (t, e) { var r = this.set(); return this.forEach(function (i) { i.isPointInside(t, e) && r.push(i) }), r }, Qe.isPointInside = function (t, e) { var i = this.realPath = this.realPath || xe[this.type](this); return r.isPointInsidePath(i, t, e) }, Qe.getBBox = function (t) { if (this.removed) return {}; var e = this._; return t ? ((e.dirty || !e.bboxwt) && (this.realPath = xe[this.type](this), e.bboxwt = Te(this.realPath), e.bboxwt.toString = g, e.dirty = 0), e.bboxwt) : ((e.dirty || e.dirtyT || !e.bbox) && ((e.dirty || !this.realPath) && (e.bboxwt = 0, this.realPath = xe[this.type](this)), e.bbox = Te(ve(this.realPath, this.matrix)), e.bbox.toString = g, e.dirty = e.dirtyT = 0), e.bbox) }, Qe.clone = function () { if (this.removed) return null; var t = this.paper[this.type]().attr(this.attr()); return this.__set__ && this.__set__.push(t), t }, Qe.glow = function (t) { if ("text" == this.type) return null; t = t || {}; var e = { width: (t.width || 10) + (+this.attr("stroke-width") || 1), fill: t.fill || !1, opacity: t.opacity || .5, offsetx: t.offsetx || 0, offsety: t.offsety || 0, color: t.color || "#000" }, r = e.width / 2, i = this.paper, n = i.set(), a = this.realPath || xe[this.type](this); a = this.matrix ? ve(a, this.matrix) : a; for (var s = 1; r + 1 > s; s++) n.push(i.path(a).attr({ stroke: e.color, fill: e.fill ? e.color : "none", "stroke-linejoin": "round", "stroke-linecap": "round", "stroke-width": +(e.width / r * s).toFixed(3), opacity: +(e.opacity / r).toFixed(3) })); return n.insertBefore(this).translate(e.offsetx, e.offsety) }; var er = function (t, e, i, n, a, s, o, l, c) { return null == c ? h(t, e, i, n, a, s, o, l) : r.findDotsAtSegment(t, e, i, n, a, s, o, l, u(t, e, i, n, a, s, o, l, c)) }, rr = function (t, e) { return function (i, n, a) { i = Re(i); for (var s, o, l, h, u, c = "", f = {}, p = 0, d = 0, g = i.length; g > d; d++) { if (l = i[d], "M" == l[0]) s = +l[1], o = +l[2]; else { if (h = er(s, o, l[1], l[2], l[3], l[4], l[5], l[6]), p + h > n) { if (e && !f.start) { if (u = er(s, o, l[1], l[2], l[3], l[4], l[5], l[6], n - p), c += ["C" + u.start.x, u.start.y, u.m.x, u.m.y, u.x, u.y], a) return c; f.start = c, c = ["M" + u.x, u.y + "C" + u.n.x, u.n.y, u.end.x, u.end.y, l[5], l[6]].join(), p += h, s = +l[5], o = +l[6]; continue } if (!t && !e) return u = er(s, o, l[1], l[2], l[3], l[4], l[5], l[6], n - p), { x: u.x, y: u.y, alpha: u.alpha } } p += h, s = +l[5], o = +l[6] } c += l.shift() + l } return f.end = c, u = t ? p : e ? f : r.findDotsAtSegment(s, o, l[0], l[1], l[2], l[3], l[4], l[5], 1), u.alpha && (u = { x: u.x, y: u.y, alpha: u.alpha }), u } }, ir = rr(1), nr = rr(), ar = rr(0, 1); r.getTotalLength = ir, r.getPointAtLength = nr, r.getSubpath = function (t, e, r) { if (1e-6 > this.getTotalLength(t) - r) return ar(t, e).end; var i = ar(t, r, 1); return e ? ar(i, e).end : i }, Qe.getTotalLength = function () { return "path" == this.type ? this.node.getTotalLength ? this.node.getTotalLength() : ir(this.attrs.path) : void 0 }, Qe.getPointAtLength = function (t) { return "path" == this.type ? nr(this.attrs.path, t) : void 0 }, Qe.getSubpath = function (t, e) { return "path" == this.type ? r.getSubpath(this.attrs.path, t, e) : void 0 }; var sr = r.easing_formulas = { linear: function (t) { return t }, "<": function (t) { return Y(t, 1.7) }, ">": function (t) { return Y(t, .48) }, "<>": function (t) { var e = .48 - t / 1.04, r = q.sqrt(.1734 + e * e), i = r - e, n = Y(V(i), 1 / 3) * (0 > i ? -1 : 1), a = -r - e, s = Y(V(a), 1 / 3) * (0 > a ? -1 : 1), o = n + s + .5; return 3 * (1 - o) * o * o + o * o * o }, backIn: function (t) { var e = 1.70158; return t * t * ((e + 1) * t - e) }, backOut: function (t) { t -= 1; var e = 1.70158; return t * t * ((e + 1) * t + e) + 1 }, elastic: function (t) { return t == !!t ? t : Y(2, -10 * t) * q.sin((t - .075) * 2 * G / .3) + 1 }, bounce: function (t) { var e, r = 7.5625, i = 2.75; return 1 / i > t ? e = r * t * t : 2 / i > t ? (t -= 1.5 / i, e = r * t * t + .75) : 2.5 / i > t ? (t -= 2.25 / i, e = r * t * t + .9375) : (t -= 2.625 / i, e = r * t * t + .984375), e } }; sr.easeIn = sr["ease-in"] = sr["<"], sr.easeOut = sr["ease-out"] = sr[">"], sr.easeInOut = sr["ease-in-out"] = sr["<>"], sr["back-in"] = sr.backIn, sr["back-out"] = sr.backOut; var or = [], lr = t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || t.oRequestAnimationFrame || t.msRequestAnimationFrame || function (t) { setTimeout(t, 16) }, hr = function () { for (var t = +new Date, i = 0; or.length > i; i++) { var n = or[i]; if (!n.el.removed && !n.paused) { var a, s, o = t - n.start, l = n.ms, h = n.easing, u = n.from, c = n.diff, f = n.to, p = (n.t, n.el), d = {}, g = {}; if (n.initstatus ? (o = (n.initstatus * n.anim.top - n.prev) / (n.percent - n.prev) * l, n.status = n.initstatus, delete n.initstatus, n.stop && or.splice(i--, 1)) : n.status = (n.prev + (n.percent - n.prev) * (o / l)) / n.anim.top, !(0 > o)) if (l > o) { var x = h(o / l); for (var v in u) if (u[B](v)) { switch (ie[v]) { case W: a = +u[v] + x * l * c[v]; break; case "colour": a = "rgb(" + [ur(J(u[v].r + x * l * c[v].r)), ur(J(u[v].g + x * l * c[v].g)), ur(J(u[v].b + x * l * c[v].b))].join(",") + ")"; break; case "path": a = []; for (var m = 0, b = u[v].length; b > m; m++) { a[m] = [u[v][m][0]]; for (var _ = 1, w = u[v][m].length; w > _; _++) a[m][_] = +u[v][m][_] + x * l * c[v][m][_]; a[m] = a[m].join(z) } a = a.join(z); break; case "transform": if (c[v].real) for (a = [], m = 0, b = u[v].length; b > m; m++) for (a[m] = [u[v][m][0]], _ = 1, w = u[v][m].length; w > _; _++) a[m][_] = u[v][m][_] + x * l * c[v][m][_]; else { var k = function (t) { return +u[v][t] + x * l * c[v][t] }; a = [["m", k(0), k(1), k(2), k(3), k(4), k(5)]] } break; case "csv": if ("clip-rect" == v) for (a = [], m = 4; m--;) a[m] = +u[v][m] + x * l * c[v][m]; break; default: var C = [][E](u[v]); for (a = [], m = p.paper.customAttributes[v].length; m--;) a[m] = +C[m] + x * l * c[v][m] } d[v] = a } p.attr(d), function (t, r, i) { setTimeout(function () { e("raphael.anim.frame." + t, r, i) }) }(p.id, p, n.anim) } else { if (function (t, i, n) { setTimeout(function () { e("raphael.anim.frame." + i.id, i, n), e("raphael.anim.finish." + i.id, i, n), r.is(t, "function") && t.call(i) }) }(n.callback, p, n.anim), p.attr(f), or.splice(i--, 1), n.repeat > 1 && !n.next) { for (s in f) f[B](s) && (g[s] = n.totalOrigin[s]); n.el.attr(g), y(n.anim, n.el, n.anim.percents[0], null, n.totalOrigin, n.repeat - 1) } n.next && !n.stop && y(n.anim, n.el, n.next, null, n.totalOrigin, n.repeat) } } } r.svg && p && p.paper && p.paper.safari(), or.length && lr(hr) }, ur = function (t) { return t > 255 ? 255 : 0 > t ? 0 : t }; Qe.animateWith = function (t, e, i, n, a, s) { var o = this; if (o.removed) return s && s.call(o), o; var l = i instanceof v ? i : r.animation(i, n, a, s); y(l, o, l.percents[0], null, o.attr()); for (var h = 0, u = or.length; u > h; h++) if (or[h].anim == e && or[h].el == t) { or[u - 1].start = or[h].start; break } return o }, Qe.onAnimation = function (t) { return t ? e.on("raphael.anim.frame." + this.id, t) : e.unbind("raphael.anim.frame." + this.id), this }, v.prototype.delay = function (t) { var e = new v(this.anim, this.ms); return e.times = this.times, e.del = +t || 0, e }, v.prototype.repeat = function (t) { var e = new v(this.anim, this.ms); return e.del = this.del, e.times = q.floor(D(t, 0)) || 1, e }, r.animation = function (t, e, i, n) { if (t instanceof v) return t; (r.is(i, "function") || !i) && (n = n || i || null, i = null), t = Object(t), e = +e || 0; var a, s, o = {}; for (s in t) t[B](s) && K(s) != s && K(s) + "%" != s && (a = !0, o[s] = t[s]); return a ? (i && (o.easing = i), n && (o.callback = n), new v({ 100: o }, e)) : new v(t, e) }, Qe.animate = function (t, e, i, n) { var a = this; if (a.removed) return n && n.call(a), a; var s = t instanceof v ? t : r.animation(t, e, i, n); return y(s, a, s.percents[0], null, a.attr()), a }, Qe.setTime = function (t, e) { return t && null != e && this.status(t, O(e, t.ms) / t.ms), this }, Qe.status = function (t, e) { var r, i, n = [], a = 0; if (null != e) return y(t, this, -1, O(e, 1)), this; for (r = or.length; r > a; a++) if (i = or[a], i.el.id == this.id && (!t || i.anim == t)) { if (t) return i.status; n.push({ anim: i.anim, status: i.status }) } return t ? 0 : n }, Qe.pause = function (t) { for (var r = 0; or.length > r; r++) or[r].el.id != this.id || t && or[r].anim != t || e("raphael.anim.pause." + this.id, this, or[r].anim) !== !1 && (or[r].paused = !0); return this }, Qe.resume = function (t) { for (var r = 0; or.length > r; r++) if (or[r].el.id == this.id && (!t || or[r].anim == t)) { var i = or[r]; e("raphael.anim.resume." + this.id, this, i.anim) !== !1 && (delete i.paused, this.status(i.anim, i.status)) } return this }, Qe.stop = function (t) { for (var r = 0; or.length > r; r++) or[r].el.id != this.id || t && or[r].anim != t || e("raphael.anim.stop." + this.id, this, or[r].anim) !== !1 && or.splice(r--, 1); return this }, e.on("raphael.remove", m), e.on("raphael.clear", m), Qe.toString = function () { return "Raphaël’s object" }; var cr = function (t) { if (this.items = [], this.length = 0, this.type = "set", t) for (var e = 0, r = t.length; r > e; e++) !t[e] || t[e].constructor != Qe.constructor && t[e].constructor != cr || (this[this.items.length] = this.items[this.items.length] = t[e], this.length++) }, fr = cr.prototype; fr.push = function () { for (var t, e, r = 0, i = arguments.length; i > r; r++) t = arguments[r], !t || t.constructor != Qe.constructor && t.constructor != cr || (e = this.items.length, this[e] = this.items[e] = t, this.length++); return this }, fr.pop = function () { return this.length && delete this[this.length--], this.items.pop() }, fr.forEach = function (t, e) { for (var r = 0, i = this.items.length; i > r; r++) if (t.call(e, this.items[r], r) === !1) return this; return this }; for (var pr in Qe) Qe[B](pr) && (fr[pr] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t][N](r, e) }) } }(pr)); return fr.attr = function (t, e) { if (t && r.is(t, H) && r.is(t[0], "object")) for (var i = 0, n = t.length; n > i; i++) this.items[i].attr(t[i]); else for (var a = 0, s = this.items.length; s > a; a++) this.items[a].attr(t, e); return this }, fr.clear = function () { for (; this.length;) this.pop() }, fr.splice = function (t, e) { t = 0 > t ? D(this.length + t, 0) : t, e = D(0, O(this.length - t, e)); var r, i = [], n = [], a = []; for (r = 2; arguments.length > r; r++) a.push(arguments[r]); for (r = 0; e > r; r++) n.push(this[t + r]); for (; this.length - t > r; r++) i.push(this[t + r]); var s = a.length; for (r = 0; s + i.length > r; r++) this.items[t + r] = this[t + r] = s > r ? a[r] : i[r - s]; for (r = this.items.length = this.length -= e - s; this[r];) delete this[r++]; return new cr(n) }, fr.exclude = function (t) { for (var e = 0, r = this.length; r > e; e++) if (this[e] == t) return this.splice(e, 1), !0 }, fr.animate = function (t, e, i, n) { (r.is(i, "function") || !i) && (n = i || null); var a, s, o = this.items.length, l = o, h = this; if (!o) return this; n && (s = function () { !--o && n.call(h) }), i = r.is(i, X) ? i : s; var u = r.animation(t, e, i, s); for (a = this.items[--l].animate(u) ; l--;) this.items[l] && !this.items[l].removed && this.items[l].animateWith(a, u, u), this.items[l] && !this.items[l].removed || o--; return this }, fr.insertAfter = function (t) { for (var e = this.items.length; e--;) this.items[e].insertAfter(t); return this }, fr.getBBox = function () { for (var t = [], e = [], r = [], i = [], n = this.items.length; n--;) if (!this.items[n].removed) { var a = this.items[n].getBBox(); t.push(a.x), e.push(a.y), r.push(a.x + a.width), i.push(a.y + a.height) } return t = O[N](0, t), e = O[N](0, e), r = D[N](0, r), i = D[N](0, i), { x: t, y: e, x2: r, y2: i, width: r - t, height: i - e } }, fr.clone = function (t) { t = this.paper.set(); for (var e = 0, r = this.items.length; r > e; e++) t.push(this.items[e].clone()); return t }, fr.toString = function () { return "Raphaël‘s set" }, fr.glow = function (t) { var e = this.paper.set(); return this.forEach(function (r) { var i = r.glow(t); null != i && i.forEach(function (t) { e.push(t) }) }), e }, fr.isPointInside = function (t, e) { var r = !1; return this.forEach(function (i) { return i.isPointInside(t, e) ? (console.log("runned"), r = !0, !1) : void 0 }), r }, r.registerFont = function (t) { if (!t.face) return t; this.fonts = this.fonts || {}; var e = { w: t.w, face: {}, glyphs: {} }, r = t.face["font-family"]; for (var i in t.face) t.face[B](i) && (e.face[i] = t.face[i]); if (this.fonts[r] ? this.fonts[r].push(e) : this.fonts[r] = [e], !t.svg) { e.face["units-per-em"] = te(t.face["units-per-em"], 10); for (var n in t.glyphs) if (t.glyphs[B](n)) { var a = t.glyphs[n]; if (e.glyphs[n] = { w: a.w, k: {}, d: a.d && "M" + a.d.replace(/[mlcxtrv]/g, function (t) { return { l: "L", c: "C", x: "z", t: "m", r: "l", v: "c" }[t] || "M" }) + "z" }, a.k) for (var s in a.k) a[B](s) && (e.glyphs[n].k[s] = a.k[s]) } } return t }, _.getFont = function (t, e, i, n) { if (n = n || "normal", i = i || "normal", e = +e || { normal: 400, bold: 700, lighter: 300, bolder: 800 }[e] || 400, r.fonts) { var a = r.fonts[t]; if (!a) { var s = RegExp("(^|\\s)" + t.replace(/[^\w\d\s+!~.:_-]/g, M) + "(\\s|$)", "i"); for (var o in r.fonts) if (r.fonts[B](o) && s.test(o)) { a = r.fonts[o]; break } } var l; if (a) for (var h = 0, u = a.length; u > h && (l = a[h], l.face["font-weight"] != e || l.face["font-style"] != i && l.face["font-style"] || l.face["font-stretch"] != n) ; h++); return l } }, _.print = function (t, e, i, n, a, s, o, l) { s = s || "middle", o = D(O(o || 0, 1), -1), l = D(O(l || 1, 3), 1); var h, u = F(i)[P](M), c = 0, f = 0, p = M; if (r.is(n, "string") && (n = this.getFont(n)), n) { h = (a || 16) / n.face["units-per-em"]; for (var d = n.face.bbox[P](w), g = +d[0], x = d[3] - d[1], v = 0, y = +d[1] + ("baseline" == s ? x + +n.face.descent : x / 2), m = 0, b = u.length; b > m; m++) { if ("\n" == u[m]) c = 0, k = 0, f = 0, v += x * l; else { var _ = f && n.glyphs[u[m - 1]] || {}, k = n.glyphs[u[m]]; c += f ? (_.w || n.w) + (_.k && _.k[u[m]] || 0) + n.w * o : 0, f = 1 } k && k.d && (p += r.transformPath(k.d, ["t", c * h, v * h, "s", h, h, g, y, "t", (t - g) / h, (e - y) / h])) } } return this.path(p).attr({ fill: "#000", stroke: "none" }) }, _.add = function (t) { if (r.is(t, "array")) for (var e, i = this.set(), n = 0, a = t.length; a > n; n++) e = t[n] || {}, k[B](e.type) && i.push(this[e.type]().attr(e)); return i }, r.format = function (t, e) { var i = r.is(e, H) ? [0][E](e) : arguments; return t && r.is(t, X) && i.length - 1 && (t = t.replace(C, function (t, e) { return null == i[++e] ? M : i[e] })), t || M }, r.fullfill = function () { var t = /\{([^\}]+)\}/g, e = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, r = function (t, r, i) { var n = i; return r.replace(e, function (t, e, r, i, a) { e = e || i, n && (e in n && (n = n[e]), "function" == typeof n && a && (n = n())) }), n = (null == n || n == i ? t : n) + "" }; return function (e, i) { return (e + "").replace(t, function (t, e) { return r(t, e, i) }) } }(), r.ninja = function () { return T.was ? S.win.Raphael = T.is : delete Raphael, r }, r.st = fr, function (t, e, i) { function n() { /in/.test(t.readyState) ? setTimeout(n, 9) : r.eve("raphael.DOMload") } null == t.readyState && t.addEventListener && (t.addEventListener(e, i = function () { t.removeEventListener(e, i, !1), t.readyState = "complete" }, !1), t.readyState = "loading"), n() }(document, "DOMContentLoaded"), e.on("raphael.DOMload", function () { b = !0 }), function () {
        if (r.svg) {
            var t = "hasOwnProperty", e = String, i = parseFloat, n = parseInt, a = Math, s = a.max, o = a.abs, l = a.pow, h = /[, ]+/, u = r.eve, c = "", f = " ", p = "http://www.w3.org/1999/xlink", d = { block: "M5,0 0,2.5 5,5z", classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z", diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z", open: "M6,1 1,3.5 6,6", oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z" }, g = {}; r.toString = function () { return "Your browser supports SVG.\nYou are running Raphaël " + this.version }; var x = function (i, n) { if (n) { "string" == typeof i && (i = x(i)); for (var a in n) n[t](a) && ("xlink:" == a.substring(0, 6) ? i.setAttributeNS(p, a.substring(6), e(n[a])) : i.setAttribute(a, e(n[a]))) } else i = r._g.doc.createElementNS("http://www.w3.org/2000/svg", i), i.style && (i.style.webkitTapHighlightColor = "rgba(0,0,0,0)"); return i }, v = function (t, n) { var h = "linear", u = t.id + n, f = .5, p = .5, d = t.node, g = t.paper, v = d.style, y = r._g.doc.getElementById(u); if (!y) { if (n = e(n).replace(r._radial_gradient, function (t, e, r) { if (h = "radial", e && r) { f = i(e), p = i(r); var n = 2 * (p > .5) - 1; l(f - .5, 2) + l(p - .5, 2) > .25 && (p = a.sqrt(.25 - l(f - .5, 2)) * n + .5) && .5 != p && (p = p.toFixed(5) - 1e-5 * n) } return c }), n = n.split(/\s*\-\s*/), "linear" == h) { var m = n.shift(); if (m = -i(m), isNaN(m)) return null; var b = [0, 0, a.cos(r.rad(m)), a.sin(r.rad(m))], _ = 1 / (s(o(b[2]), o(b[3])) || 1); b[2] *= _, b[3] *= _, 0 > b[2] && (b[0] = -b[2], b[2] = 0), 0 > b[3] && (b[1] = -b[3], b[3] = 0) } var w = r._parseDots(n); if (!w) return null; if (u = u.replace(/[\(\)\s,\xb0#]/g, "_"), t.gradient && u != t.gradient.id && (g.defs.removeChild(t.gradient), delete t.gradient), !t.gradient) { y = x(h + "Gradient", { id: u }), t.gradient = y, x(y, "radial" == h ? { fx: f, fy: p } : { x1: b[0], y1: b[1], x2: b[2], y2: b[3], gradientTransform: t.matrix.invert() }), g.defs.appendChild(y); for (var k = 0, C = w.length; C > k; k++) y.appendChild(x("stop", { offset: w[k].offset ? w[k].offset : k ? "100%" : "0%", "stop-color": w[k].color || "#fff" })) } } return x(d, { fill: "url(#" + u + ")", opacity: 1, "fill-opacity": 1 }), v.fill = c, v.opacity = 1, v.fillOpacity = 1, 1 }, y = function (t) { var e = t.getBBox(1); x(t.pattern, { patternTransform: t.matrix.invert() + " translate(" + e.x + "," + e.y + ")" }) }, m = function (i, n, a) { if ("path" == i.type) { for (var s, o, l, h, u, f = e(n).toLowerCase().split("-"), p = i.paper, v = a ? "end" : "start", y = i.node, m = i.attrs, b = m["stroke-width"], _ = f.length, w = "classic", k = 3, C = 3, B = 5; _--;) switch (f[_]) { case "block": case "classic": case "oval": case "diamond": case "open": case "none": w = f[_]; break; case "wide": C = 5; break; case "narrow": C = 2; break; case "long": k = 5; break; case "short": k = 2 } if ("open" == w ? (k += 2, C += 2, B += 2, l = 1, h = a ? 4 : 1, u = { fill: "none", stroke: m.stroke }) : (h = l = k / 2, u = { fill: m.stroke, stroke: "none" }), i._.arrows ? a ? (i._.arrows.endPath && g[i._.arrows.endPath]--, i._.arrows.endMarker && g[i._.arrows.endMarker]--) : (i._.arrows.startPath && g[i._.arrows.startPath]--, i._.arrows.startMarker && g[i._.arrows.startMarker]--) : i._.arrows = {}, "none" != w) { var S = "raphael-marker-" + w, T = "raphael-marker-" + v + w + k + C; r._g.doc.getElementById(S) ? g[S]++ : (p.defs.appendChild(x(x("path"), { "stroke-linecap": "round", d: d[w], id: S })), g[S] = 1); var A, N = r._g.doc.getElementById(T); N ? (g[T]++, A = N.getElementsByTagName("use")[0]) : (N = x(x("marker"), { id: T, markerHeight: C, markerWidth: k, orient: "auto", refX: h, refY: C / 2 }), A = x(x("use"), { "xlink:href": "#" + S, transform: (a ? "rotate(180 " + k / 2 + " " + C / 2 + ") " : c) + "scale(" + k / B + "," + C / B + ")", "stroke-width": (1 / ((k / B + C / B) / 2)).toFixed(4) }), N.appendChild(A), p.defs.appendChild(N), g[T] = 1), x(A, u); var E = l * ("diamond" != w && "oval" != w); a ? (s = i._.arrows.startdx * b || 0, o = r.getTotalLength(m.path) - E * b) : (s = E * b, o = r.getTotalLength(m.path) - (i._.arrows.enddx * b || 0)), u = {}, u["marker-" + v] = "url(#" + T + ")", (o || s) && (u.d = r.getSubpath(m.path, s, o)), x(y, u), i._.arrows[v + "Path"] = S, i._.arrows[v + "Marker"] = T, i._.arrows[v + "dx"] = E, i._.arrows[v + "Type"] = w, i._.arrows[v + "String"] = n } else a ? (s = i._.arrows.startdx * b || 0, o = r.getTotalLength(m.path) - s) : (s = 0, o = r.getTotalLength(m.path) - (i._.arrows.enddx * b || 0)), i._.arrows[v + "Path"] && x(y, { d: r.getSubpath(m.path, s, o) }), delete i._.arrows[v + "Path"], delete i._.arrows[v + "Marker"], delete i._.arrows[v + "dx"], delete i._.arrows[v + "Type"], delete i._.arrows[v + "String"]; for (u in g) if (g[t](u) && !g[u]) { var L = r._g.doc.getElementById(u); L && L.parentNode.removeChild(L) } } }, b = { "": [0], none: [0], "-": [3, 1], ".": [1, 1], "-.": [3, 1, 1, 1], "-..": [3, 1, 1, 1, 1, 1], ". ": [1, 3], "- ": [4, 3], "--": [8, 3], "- .": [4, 3, 1, 3], "--.": [8, 3, 1, 3], "--..": [8, 3, 1, 3, 1, 3] }, _ = function (t, r, i) { if (r = b[e(r).toLowerCase()]) { for (var n = t.attrs["stroke-width"] || "1", a = { round: n, square: n, butt: 0 }[t.attrs["stroke-linecap"] || i["stroke-linecap"]] || 0, s = [], o = r.length; o--;) s[o] = r[o] * n + (o % 2 ? 1 : -1) * a; x(t.node, { "stroke-dasharray": s.join(",") }) } }, w = function (i, a) { var l = i.node, u = i.attrs, f = l.style.visibility; l.style.visibility = "hidden"; for (var d in a) if (a[t](d)) { if (!r._availableAttrs[t](d)) continue; var g = a[d]; switch (u[d] = g, d) { case "blur": i.blur(g); break; case "href": case "title": case "target": var b = l.parentNode; if ("a" != b.tagName.toLowerCase()) { var w = x("a"); b.insertBefore(w, l), w.appendChild(l), b = w } "target" == d ? b.setAttributeNS(p, "show", "blank" == g ? "new" : g) : b.setAttributeNS(p, d, g); break; case "cursor": l.style.cursor = g; break; case "transform": i.transform(g); break; case "arrow-start": m(i, g); break; case "arrow-end": m(i, g, 1); break; case "clip-rect": var k = e(g).split(h); if (4 == k.length) { i.clip && i.clip.parentNode.parentNode.removeChild(i.clip.parentNode); var B = x("clipPath"), S = x("rect"); B.id = r.createUUID(), x(S, { x: k[0], y: k[1], width: k[2], height: k[3] }), B.appendChild(S), i.paper.defs.appendChild(B), x(l, { "clip-path": "url(#" + B.id + ")" }), i.clip = S } if (!g) { var T = l.getAttribute("clip-path"); if (T) { var A = r._g.doc.getElementById(T.replace(/(^url\(#|\)$)/g, c)); A && A.parentNode.removeChild(A), x(l, { "clip-path": c }), delete i.clip } } break; case "path": "path" == i.type && (x(l, { d: g ? u.path = r._pathToAbsolute(g) : "M0,0" }), i._.dirty = 1, i._.arrows && ("startString" in i._.arrows && m(i, i._.arrows.startString), "endString" in i._.arrows && m(i, i._.arrows.endString, 1))); break; case "width": if (l.setAttribute(d, g), i._.dirty = 1, !u.fx) break; d = "x", g = u.x; case "x": u.fx && (g = -u.x - (u.width || 0)); case "rx": if ("rx" == d && "rect" == i.type) break; case "cx": l.setAttribute(d, g), i.pattern && y(i), i._.dirty = 1; break; case "height": if (l.setAttribute(d, g), i._.dirty = 1, !u.fy) break; d = "y", g = u.y; case "y": u.fy && (g = -u.y - (u.height || 0)); case "ry": if ("ry" == d && "rect" == i.type) break; case "cy": l.setAttribute(d, g), i.pattern && y(i), i._.dirty = 1; break; case "r": "rect" == i.type ? x(l, { rx: g, ry: g }) : l.setAttribute(d, g), i._.dirty = 1; break; case "src": "image" == i.type && l.setAttributeNS(p, "href", g); break; case "stroke-width": (1 != i._.sx || 1 != i._.sy) && (g /= s(o(i._.sx), o(i._.sy)) || 1), i.paper._vbSize && (g *= i.paper._vbSize), l.setAttribute(d, g), u["stroke-dasharray"] && _(i, u["stroke-dasharray"], a), i._.arrows && ("startString" in i._.arrows && m(i, i._.arrows.startString), "endString" in i._.arrows && m(i, i._.arrows.endString, 1)); break; case "stroke-dasharray": _(i, g, a); break; case "fill": var N = e(g).match(r._ISURL); if (N) { B = x("pattern"); var E = x("image"); B.id = r.createUUID(), x(B, { x: 0, y: 0, patternUnits: "userSpaceOnUse", height: 1, width: 1 }), x(E, { x: 0, y: 0, "xlink:href": N[1] }), B.appendChild(E), function (t) { r._preload(N[1], function () { var e = this.offsetWidth, r = this.offsetHeight; x(t, { width: e, height: r }), x(E, { width: e, height: r }), i.paper.safari() }) }(B), i.paper.defs.appendChild(B), x(l, { fill: "url(#" + B.id + ")" }), i.pattern = B, i.pattern && y(i); break } var L = r.getRGB(g); if (L.error) { if (("circle" == i.type || "ellipse" == i.type || "r" != e(g).charAt()) && v(i, g)) { if ("opacity" in u || "fill-opacity" in u) { var M = r._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g, c)); if (M) { var z = M.getElementsByTagName("stop"); x(z[z.length - 1], { "stop-opacity": ("opacity" in u ? u.opacity : 1) * ("fill-opacity" in u ? u["fill-opacity"] : 1) }) } } u.gradient = g, u.fill = "none"; break } } else delete a.gradient, delete u.gradient, !r.is(u.opacity, "undefined") && r.is(a.opacity, "undefined") && x(l, { opacity: u.opacity }), !r.is(u["fill-opacity"], "undefined") && r.is(a["fill-opacity"], "undefined") && x(l, { "fill-opacity": u["fill-opacity"] }); L[t]("opacity") && x(l, { "fill-opacity": L.opacity > 1 ? L.opacity / 100 : L.opacity }); case "stroke": L = r.getRGB(g), l.setAttribute(d, L.hex), "stroke" == d && L[t]("opacity") && x(l, { "stroke-opacity": L.opacity > 1 ? L.opacity / 100 : L.opacity }), "stroke" == d && i._.arrows && ("startString" in i._.arrows && m(i, i._.arrows.startString), "endString" in i._.arrows && m(i, i._.arrows.endString, 1)); break; case "gradient": ("circle" == i.type || "ellipse" == i.type || "r" != e(g).charAt()) && v(i, g); break; case "opacity": u.gradient && !u[t]("stroke-opacity") && x(l, { "stroke-opacity": g > 1 ? g / 100 : g }); case "fill-opacity": if (u.gradient) { M = r._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g, c)), M && (z = M.getElementsByTagName("stop"), x(z[z.length - 1], { "stop-opacity": g })); break } default: "font-size" == d && (g = n(g, 10) + "px"); var F = d.replace(/(\-.)/g, function (t) { return t.substring(1).toUpperCase() }); l.style[F] = g, i._.dirty = 1, l.setAttribute(d, g) } } C(i, a), l.style.visibility = f }, k = 1.2, C = function (i, a) { if ("text" == i.type && (a[t]("text") || a[t]("font") || a[t]("font-size") || a[t]("x") || a[t]("y"))) { var s = i.attrs, o = i.node, l = o.firstChild ? n(r._g.doc.defaultView.getComputedStyle(o.firstChild, c).getPropertyValue("font-size"), 10) : 10; if (a[t]("text")) { for (s.text = a.text; o.firstChild;) o.removeChild(o.firstChild); for (var h, u = e(a.text).split("\n"), f = [], p = 0, d = u.length; d > p; p++) h = x("tspan"), p && x(h, { dy: l * k, x: s.x }), h.appendChild(r._g.doc.createTextNode(u[p])), o.appendChild(h), f[p] = h } else for (f = o.getElementsByTagName("tspan"), p = 0, d = f.length; d > p; p++) p ? x(f[p], { dy: l * k, x: s.x }) : x(f[0], { dy: 0 }); x(o, { x: s.x, y: s.y }), i._.dirty = 1; var g = i._getBBox(), v = s.y - (g.y + g.height / 2); v && r.is(v, "finite") && x(f[0], { dy: v }) } }, B = function (t, e) {
                this[0] = this.node = t, t.raphael = !0, this.id = r._oid++, t.raphaelid = this.id, this.matrix = r.matrix(), this.realPath = null, this.paper = e, this.attrs = this.attrs || {}, this._ = { transform: [], sx: 1, sy: 1, deg: 0, dx: 0, dy: 0, dirty: 1 }, !e.bottom && (e.bottom = this), this.prev = e.top, e.top && (e.top.next = this), e.top = this, this.next = null
            }, S = r.el; B.prototype = S, S.constructor = B, r._engine.path = function (t, e) { var r = x("path"); e.canvas && e.canvas.appendChild(r); var i = new B(r, e); return i.type = "path", w(i, { fill: "none", stroke: "#000", path: t }), i }, S.rotate = function (t, r, n) { if (this.removed) return this; if (t = e(t).split(h), t.length - 1 && (r = i(t[1]), n = i(t[2])), t = i(t[0]), null == n && (r = n), null == r || null == n) { var a = this.getBBox(1); r = a.x + a.width / 2, n = a.y + a.height / 2 } return this.transform(this._.transform.concat([["r", t, r, n]])), this }, S.scale = function (t, r, n, a) { if (this.removed) return this; if (t = e(t).split(h), t.length - 1 && (r = i(t[1]), n = i(t[2]), a = i(t[3])), t = i(t[0]), null == r && (r = t), null == a && (n = a), null == n || null == a) var s = this.getBBox(1); return n = null == n ? s.x + s.width / 2 : n, a = null == a ? s.y + s.height / 2 : a, this.transform(this._.transform.concat([["s", t, r, n, a]])), this }, S.translate = function (t, r) { return this.removed ? this : (t = e(t).split(h), t.length - 1 && (r = i(t[1])), t = i(t[0]) || 0, r = +r || 0, this.transform(this._.transform.concat([["t", t, r]])), this) }, S.transform = function (e) { var i = this._; if (null == e) return i.transform; if (r._extractTransform(this, e), this.clip && x(this.clip, { transform: this.matrix.invert() }), this.pattern && y(this), this.node && x(this.node, { transform: this.matrix }), 1 != i.sx || 1 != i.sy) { var n = this.attrs[t]("stroke-width") ? this.attrs["stroke-width"] : 1; this.attr({ "stroke-width": n }) } return this }, S.hide = function () { return !this.removed && this.paper.safari(this.node.style.display = "none"), this }, S.show = function () { return !this.removed && this.paper.safari(this.node.style.display = ""), this }, S.remove = function () { if (!this.removed && this.node.parentNode) { var t = this.paper; t.__set__ && t.__set__.exclude(this), u.unbind("raphael.*.*." + this.id), this.gradient && t.defs.removeChild(this.gradient), r._tear(this, t), "a" == this.node.parentNode.tagName.toLowerCase() ? this.node.parentNode.parentNode.removeChild(this.node.parentNode) : this.node.parentNode.removeChild(this.node); for (var e in this) this[e] = "function" == typeof this[e] ? r._removedFactory(e) : null; this.removed = !0 } }, S._getBBox = function () { if ("none" == this.node.style.display) { this.show(); var t = !0 } var e = {}; try { e = this.node.getBBox() } catch (r) { } finally { e = e || {} } return t && this.hide(), e }, S.attr = function (e, i) { if (this.removed) return this; if (null == e) { var n = {}; for (var a in this.attrs) this.attrs[t](a) && (n[a] = this.attrs[a]); return n.gradient && "none" == n.fill && (n.fill = n.gradient) && delete n.gradient, n.transform = this._.transform, n } if (null == i && r.is(e, "string")) { if ("fill" == e && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient; if ("transform" == e) return this._.transform; for (var s = e.split(h), o = {}, l = 0, c = s.length; c > l; l++) e = s[l], o[e] = e in this.attrs ? this.attrs[e] : r.is(this.paper.customAttributes[e], "function") ? this.paper.customAttributes[e].def : r._availableAttrs[e]; return c - 1 ? o : o[s[0]] } if (null == i && r.is(e, "array")) { for (o = {}, l = 0, c = e.length; c > l; l++) o[e[l]] = this.attr(e[l]); return o } if (null != i) { var f = {}; f[e] = i } else null != e && r.is(e, "object") && (f = e); for (var p in f) u("raphael.attr." + p + "." + this.id, this, f[p]); for (p in this.paper.customAttributes) if (this.paper.customAttributes[t](p) && f[t](p) && r.is(this.paper.customAttributes[p], "function")) { var d = this.paper.customAttributes[p].apply(this, [].concat(f[p])); this.attrs[p] = f[p]; for (var g in d) d[t](g) && (f[g] = d[g]) } return w(this, f), this }, S.toFront = function () { if (this.removed) return this; "a" == this.node.parentNode.tagName.toLowerCase() ? this.node.parentNode.parentNode.appendChild(this.node.parentNode) : this.node.parentNode.appendChild(this.node); var t = this.paper; return t.top != this && r._tofront(this, t), this }, S.toBack = function () { if (this.removed) return this; var t = this.node.parentNode; return "a" == t.tagName.toLowerCase() ? t.parentNode.insertBefore(this.node.parentNode, this.node.parentNode.parentNode.firstChild) : t.firstChild != this.node && t.insertBefore(this.node, this.node.parentNode.firstChild), r._toback(this, this.paper), this.paper, this }, S.insertAfter = function (t) { if (this.removed) return this; var e = t.node || t[t.length - 1].node; return e.nextSibling ? e.parentNode.insertBefore(this.node, e.nextSibling) : e.parentNode.appendChild(this.node), r._insertafter(this, t, this.paper), this }, S.insertBefore = function (t) { if (this.removed) return this; var e = t.node || t[0].node; return e.parentNode.insertBefore(this.node, e), r._insertbefore(this, t, this.paper), this }, S.blur = function (t) { var e = this; if (0 !== +t) { var i = x("filter"), n = x("feGaussianBlur"); e.attrs.blur = t, i.id = r.createUUID(), x(n, { stdDeviation: +t || 1.5 }), i.appendChild(n), e.paper.defs.appendChild(i), e._blur = i, x(e.node, { filter: "url(#" + i.id + ")" }) } else e._blur && (e._blur.parentNode.removeChild(e._blur), delete e._blur, delete e.attrs.blur), e.node.removeAttribute("filter"); return e }, r._engine.circle = function (t, e, r, i) { var n = x("circle"); t.canvas && t.canvas.appendChild(n); var a = new B(n, t); return a.attrs = { cx: e, cy: r, r: i, fill: "none", stroke: "#000" }, a.type = "circle", x(n, a.attrs), a }, r._engine.rect = function (t, e, r, i, n, a) { var s = x("rect"); t.canvas && t.canvas.appendChild(s); var o = new B(s, t); return o.attrs = { x: e, y: r, width: i, height: n, r: a || 0, rx: a || 0, ry: a || 0, fill: "none", stroke: "#000" }, o.type = "rect", x(s, o.attrs), o }, r._engine.ellipse = function (t, e, r, i, n) { var a = x("ellipse"); t.canvas && t.canvas.appendChild(a); var s = new B(a, t); return s.attrs = { cx: e, cy: r, rx: i, ry: n, fill: "none", stroke: "#000" }, s.type = "ellipse", x(a, s.attrs), s }, r._engine.image = function (t, e, r, i, n, a) { var s = x("image"); x(s, { x: r, y: i, width: n, height: a, preserveAspectRatio: "none" }), s.setAttributeNS(p, "href", e), t.canvas && t.canvas.appendChild(s); var o = new B(s, t); return o.attrs = { x: r, y: i, width: n, height: a, src: e }, o.type = "image", o }, r._engine.text = function (t, e, i, n) { var a = x("text"); t.canvas && t.canvas.appendChild(a); var s = new B(a, t); return s.attrs = { x: e, y: i, "text-anchor": "middle", text: n, font: r._availableAttrs.font, stroke: "none", fill: "#000" }, s.type = "text", w(s, s.attrs), s }, r._engine.setSize = function (t, e) { return this.width = t || this.width, this.height = e || this.height, this.canvas.setAttribute("width", this.width), this.canvas.setAttribute("height", this.height), this._viewBox && this.setViewBox.apply(this, this._viewBox), this }, r._engine.create = function () { var t = r._getContainer.apply(0, arguments), e = t && t.container, i = t.x, n = t.y, a = t.width, s = t.height; if (!e) throw Error("SVG container not found."); var o, l = x("svg"), h = "overflow:hidden;"; return i = i || 0, n = n || 0, a = a || 512, s = s || 342, x(l, { height: s, version: 1.1, width: a, xmlns: "http://www.w3.org/2000/svg" }), 1 == e ? (l.style.cssText = h + "position:absolute;left:" + i + "px;top:" + n + "px", r._g.doc.body.appendChild(l), o = 1) : (l.style.cssText = h + "position:relative", e.firstChild ? e.insertBefore(l, e.firstChild) : e.appendChild(l)), e = new r._Paper, e.width = a, e.height = s, e.canvas = l, e.clear(), e._left = e._top = 0, o && (e.renderfix = function () { }), e.renderfix(), e }, r._engine.setViewBox = function (t, e, r, i, n) { u("raphael.setViewBox", this, this._viewBox, [t, e, r, i, n]); var a, o, l = s(r / this.width, i / this.height), h = this.top, c = n ? "meet" : "xMinYMin"; for (null == t ? (this._vbSize && (l = 1), delete this._vbSize, a = "0 0 " + this.width + f + this.height) : (this._vbSize = l, a = t + f + e + f + r + f + i), x(this.canvas, { viewBox: a, preserveAspectRatio: c }) ; l && h;) o = "stroke-width" in h.attrs ? h.attrs["stroke-width"] : 1, h.attr({ "stroke-width": o }), h._.dirty = 1, h._.dirtyT = 1, h = h.prev; return this._viewBox = [t, e, r, i, !!n], this }, r.prototype.renderfix = function () { var t, e = this.canvas, r = e.style; try { t = e.getScreenCTM() || e.createSVGMatrix() } catch (i) { t = e.createSVGMatrix() } var n = -t.e % 1, a = -t.f % 1; (n || a) && (n && (this._left = (this._left + n) % 1, r.left = this._left + "px"), a && (this._top = (this._top + a) % 1, r.top = this._top + "px")) }, r.prototype.clear = function () { r.eve("raphael.clear", this); for (var t = this.canvas; t.firstChild;) t.removeChild(t.firstChild); this.bottom = this.top = null, (this.desc = x("desc")).appendChild(r._g.doc.createTextNode("Created with Raphaël " + r.version)), t.appendChild(this.desc), t.appendChild(this.defs = x("defs")) }, r.prototype.remove = function () { u("raphael.remove", this), this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas); for (var t in this) this[t] = "function" == typeof this[t] ? r._removedFactory(t) : null }; var T = r.st; for (var A in S) S[t](A) && !T[t](A) && (T[A] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t].apply(r, e) }) } }(A))
        }
    }(), function () { if (r.vml) { var t = "hasOwnProperty", e = String, i = parseFloat, n = Math, a = n.round, s = n.max, o = n.min, l = n.abs, h = "fill", u = /[, ]+/, c = r.eve, f = " progid:DXImageTransform.Microsoft", p = " ", d = "", g = { M: "m", L: "l", C: "c", Z: "x", m: "t", l: "r", c: "v", z: "x" }, x = /([clmz]),?([^clmz]*)/gi, v = / progid:\S+Blur\([^\)]+\)/g, y = /-?[^,\s-]+/g, m = "position:absolute;left:0;top:0;width:1px;height:1px", b = 21600, _ = { path: 1, rect: 1, image: 1 }, w = { circle: 1, ellipse: 1 }, k = function (t) { var i = /[ahqstv]/gi, n = r._pathToAbsolute; if (e(t).match(i) && (n = r._path2curve), i = /[clmz]/g, n == r._pathToAbsolute && !e(t).match(i)) { var s = e(t).replace(x, function (t, e, r) { var i = [], n = "m" == e.toLowerCase(), s = g[e]; return r.replace(y, function (t) { n && 2 == i.length && (s += i + g["m" == e ? "l" : "L"], i = []), i.push(a(t * b)) }), s + i }); return s } var o, l, h = n(t); s = []; for (var u = 0, c = h.length; c > u; u++) { o = h[u], l = h[u][0].toLowerCase(), "z" == l && (l = "x"); for (var f = 1, v = o.length; v > f; f++) l += a(o[f] * b) + (f != v - 1 ? "," : d); s.push(l) } return s.join(p) }, C = function (t, e, i) { var n = r.matrix(); return n.rotate(-t, .5, .5), { dx: n.x(e, i), dy: n.y(e, i) } }, B = function (t, e, r, i, n, a) { var s = t._, o = t.matrix, u = s.fillpos, c = t.node, f = c.style, d = 1, g = "", x = b / e, v = b / r; if (f.visibility = "hidden", e && r) { if (c.coordsize = l(x) + p + l(v), f.rotation = a * (0 > e * r ? -1 : 1), a) { var y = C(a, i, n); i = y.dx, n = y.dy } if (0 > e && (g += "x"), 0 > r && (g += " y") && (d = -1), f.flip = g, c.coordorigin = i * -x + p + n * -v, u || s.fillsize) { var m = c.getElementsByTagName(h); m = m && m[0], c.removeChild(m), u && (y = C(a, o.x(u[0], u[1]), o.y(u[0], u[1])), m.position = y.dx * d + p + y.dy * d), s.fillsize && (m.size = s.fillsize[0] * l(e) + p + s.fillsize[1] * l(r)), c.appendChild(m) } f.visibility = "visible" } }; r.toString = function () { return "Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël " + this.version }; var S = function (t, r, i) { for (var n = e(r).toLowerCase().split("-"), a = i ? "end" : "start", s = n.length, o = "classic", l = "medium", h = "medium"; s--;) switch (n[s]) { case "block": case "classic": case "oval": case "diamond": case "open": case "none": o = n[s]; break; case "wide": case "narrow": h = n[s]; break; case "long": case "short": l = n[s] } var u = t.node.getElementsByTagName("stroke")[0]; u[a + "arrow"] = o, u[a + "arrowlength"] = l, u[a + "arrowwidth"] = h }, T = function (n, l) { n.attrs = n.attrs || {}; var c = n.node, f = n.attrs, g = c.style, x = _[n.type] && (l.x != f.x || l.y != f.y || l.width != f.width || l.height != f.height || l.cx != f.cx || l.cy != f.cy || l.rx != f.rx || l.ry != f.ry || l.r != f.r), v = w[n.type] && (f.cx != l.cx || f.cy != l.cy || f.r != l.r || f.rx != l.rx || f.ry != l.ry), y = n; for (var m in l) l[t](m) && (f[m] = l[m]); if (x && (f.path = r._getPath[n.type](n), n._.dirty = 1), l.href && (c.href = l.href), l.title && (c.title = l.title), l.target && (c.target = l.target), l.cursor && (g.cursor = l.cursor), "blur" in l && n.blur(l.blur), (l.path && "path" == n.type || x) && (c.path = k(~e(f.path).toLowerCase().indexOf("r") ? r._pathToAbsolute(f.path) : f.path), "image" == n.type && (n._.fillpos = [f.x, f.y], n._.fillsize = [f.width, f.height], B(n, 1, 1, 0, 0, 0))), "transform" in l && n.transform(l.transform), v) { var C = +f.cx, T = +f.cy, N = +f.rx || +f.r || 0, E = +f.ry || +f.r || 0; c.path = r.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", a((C - N) * b), a((T - E) * b), a((C + N) * b), a((T + E) * b), a(C * b)), n._.dirty = 1 } if ("clip-rect" in l) { var M = e(l["clip-rect"]).split(u); if (4 == M.length) { M[2] = +M[2] + +M[0], M[3] = +M[3] + +M[1]; var z = c.clipRect || r._g.doc.createElement("div"), F = z.style; F.clip = r.format("rect({1}px {2}px {3}px {0}px)", M), c.clipRect || (F.position = "absolute", F.top = 0, F.left = 0, F.width = n.paper.width + "px", F.height = n.paper.height + "px", c.parentNode.insertBefore(z, c), z.appendChild(c), c.clipRect = z) } l["clip-rect"] || c.clipRect && (c.clipRect.style.clip = "auto") } if (n.textpath) { var P = n.textpath.style; l.font && (P.font = l.font), l["font-family"] && (P.fontFamily = '"' + l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g, d) + '"'), l["font-size"] && (P.fontSize = l["font-size"]), l["font-weight"] && (P.fontWeight = l["font-weight"]), l["font-style"] && (P.fontStyle = l["font-style"]) } if ("arrow-start" in l && S(y, l["arrow-start"]), "arrow-end" in l && S(y, l["arrow-end"], 1), null != l.opacity || null != l["stroke-width"] || null != l.fill || null != l.src || null != l.stroke || null != l["stroke-width"] || null != l["stroke-opacity"] || null != l["fill-opacity"] || null != l["stroke-dasharray"] || null != l["stroke-miterlimit"] || null != l["stroke-linejoin"] || null != l["stroke-linecap"]) { var R = c.getElementsByTagName(h), I = !1; if (R = R && R[0], !R && (I = R = L(h)), "image" == n.type && l.src && (R.src = l.src), l.fill && (R.on = !0), (null == R.on || "none" == l.fill || null === l.fill) && (R.on = !1), R.on && l.fill) { var j = e(l.fill).match(r._ISURL); if (j) { R.parentNode == c && c.removeChild(R), R.rotate = !0, R.src = j[1], R.type = "tile"; var q = n.getBBox(1); R.position = q.x + p + q.y, n._.fillpos = [q.x, q.y], r._preload(j[1], function () { n._.fillsize = [this.offsetWidth, this.offsetHeight] }) } else R.color = r.getRGB(l.fill).hex, R.src = d, R.type = "solid", r.getRGB(l.fill).error && (y.type in { circle: 1, ellipse: 1 } || "r" != e(l.fill).charAt()) && A(y, l.fill, R) && (f.fill = "none", f.gradient = l.fill, R.rotate = !1) } if ("fill-opacity" in l || "opacity" in l) { var D = ((+f["fill-opacity"] + 1 || 2) - 1) * ((+f.opacity + 1 || 2) - 1) * ((+r.getRGB(l.fill).o + 1 || 2) - 1); D = o(s(D, 0), 1), R.opacity = D, R.src && (R.color = "none") } c.appendChild(R); var O = c.getElementsByTagName("stroke") && c.getElementsByTagName("stroke")[0], V = !1; !O && (V = O = L("stroke")), (l.stroke && "none" != l.stroke || l["stroke-width"] || null != l["stroke-opacity"] || l["stroke-dasharray"] || l["stroke-miterlimit"] || l["stroke-linejoin"] || l["stroke-linecap"]) && (O.on = !0), ("none" == l.stroke || null === l.stroke || null == O.on || 0 == l.stroke || 0 == l["stroke-width"]) && (O.on = !1); var Y = r.getRGB(l.stroke); O.on && l.stroke && (O.color = Y.hex), D = ((+f["stroke-opacity"] + 1 || 2) - 1) * ((+f.opacity + 1 || 2) - 1) * ((+Y.o + 1 || 2) - 1); var G = .75 * (i(l["stroke-width"]) || 1); if (D = o(s(D, 0), 1), null == l["stroke-width"] && (G = f["stroke-width"]), l["stroke-width"] && (O.weight = G), G && 1 > G && (D *= G) && (O.weight = 1), O.opacity = D, l["stroke-linejoin"] && (O.joinstyle = l["stroke-linejoin"] || "miter"), O.miterlimit = l["stroke-miterlimit"] || 8, l["stroke-linecap"] && (O.endcap = "butt" == l["stroke-linecap"] ? "flat" : "square" == l["stroke-linecap"] ? "square" : "round"), l["stroke-dasharray"]) { var W = { "-": "shortdash", ".": "shortdot", "-.": "shortdashdot", "-..": "shortdashdotdot", ". ": "dot", "- ": "dash", "--": "longdash", "- .": "dashdot", "--.": "longdashdot", "--..": "longdashdotdot" }; O.dashstyle = W[t](l["stroke-dasharray"]) ? W[l["stroke-dasharray"]] : d } V && c.appendChild(O) } if ("text" == y.type) { y.paper.canvas.style.display = d; var X = y.paper.span, H = 100, U = f.font && f.font.match(/\d+(?:\.\d*)?(?=px)/); g = X.style, f.font && (g.font = f.font), f["font-family"] && (g.fontFamily = f["font-family"]), f["font-weight"] && (g.fontWeight = f["font-weight"]), f["font-style"] && (g.fontStyle = f["font-style"]), U = i(f["font-size"] || U && U[0]) || 10, g.fontSize = U * H + "px", y.textpath.string && (X.innerHTML = e(y.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\n/g, "<br>")); var $ = X.getBoundingClientRect(); y.W = f.w = ($.right - $.left) / H, y.H = f.h = ($.bottom - $.top) / H, y.X = f.x, y.Y = f.y + y.H / 2, ("x" in l || "y" in l) && (y.path.v = r.format("m{0},{1}l{2},{1}", a(f.x * b), a(f.y * b), a(f.x * b) + 1)); for (var Z = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"], Q = 0, J = Z.length; J > Q; Q++) if (Z[Q] in l) { y._.dirty = 1; break } switch (f["text-anchor"]) { case "start": y.textpath.style["v-text-align"] = "left", y.bbx = y.W / 2; break; case "end": y.textpath.style["v-text-align"] = "right", y.bbx = -y.W / 2; break; default: y.textpath.style["v-text-align"] = "center", y.bbx = 0 } y.textpath.style["v-text-kern"] = !0 } }, A = function (t, a, s) { t.attrs = t.attrs || {}; var o = (t.attrs, Math.pow), l = "linear", h = ".5 .5"; if (t.attrs.gradient = a, a = e(a).replace(r._radial_gradient, function (t, e, r) { return l = "radial", e && r && (e = i(e), r = i(r), o(e - .5, 2) + o(r - .5, 2) > .25 && (r = n.sqrt(.25 - o(e - .5, 2)) * (2 * (r > .5) - 1) + .5), h = e + p + r), d }), a = a.split(/\s*\-\s*/), "linear" == l) { var u = a.shift(); if (u = -i(u), isNaN(u)) return null } var c = r._parseDots(a); if (!c) return null; if (t = t.shape || t.node, c.length) { t.removeChild(s), s.on = !0, s.method = "none", s.color = c[0].color, s.color2 = c[c.length - 1].color; for (var f = [], g = 0, x = c.length; x > g; g++) c[g].offset && f.push(c[g].offset + p + c[g].color); s.colors = f.length ? f.join() : "0% " + s.color, "radial" == l ? (s.type = "gradientTitle", s.focus = "100%", s.focussize = "0 0", s.focusposition = h, s.angle = 0) : (s.type = "gradient", s.angle = (270 - u) % 360), t.appendChild(s) } return 1 }, N = function (t, e) { this[0] = this.node = t, t.raphael = !0, this.id = r._oid++, t.raphaelid = this.id, this.X = 0, this.Y = 0, this.attrs = {}, this.paper = e, this.matrix = r.matrix(), this._ = { transform: [], sx: 1, sy: 1, dx: 0, dy: 0, deg: 0, dirty: 1, dirtyT: 1 }, !e.bottom && (e.bottom = this), this.prev = e.top, e.top && (e.top.next = this), e.top = this, this.next = null }, E = r.el; N.prototype = E, E.constructor = N, E.transform = function (t) { if (null == t) return this._.transform; var i, n = this.paper._viewBoxShift, a = n ? "s" + [n.scale, n.scale] + "-1-1t" + [n.dx, n.dy] : d; n && (i = t = e(t).replace(/\.{3}|\u2026/g, this._.transform || d)), r._extractTransform(this, a + t); var s, o = this.matrix.clone(), l = this.skew, h = this.node, u = ~e(this.attrs.fill).indexOf("-"), c = !e(this.attrs.fill).indexOf("url("); if (o.translate(-.5, -.5), c || u || "image" == this.type) if (l.matrix = "1 0 0 1", l.offset = "0 0", s = o.split(), u && s.noRotation || !s.isSimple) { h.style.filter = o.toFilter(); var f = this.getBBox(), g = this.getBBox(1), x = f.x - g.x, v = f.y - g.y; h.coordorigin = x * -b + p + v * -b, B(this, 1, 1, x, v, 0) } else h.style.filter = d, B(this, s.scalex, s.scaley, s.dx, s.dy, s.rotate); else h.style.filter = d, l.matrix = e(o), l.offset = o.offset(); return i && (this._.transform = i), this }, E.rotate = function (t, r, n) { if (this.removed) return this; if (null != t) { if (t = e(t).split(u), t.length - 1 && (r = i(t[1]), n = i(t[2])), t = i(t[0]), null == n && (r = n), null == r || null == n) { var a = this.getBBox(1); r = a.x + a.width / 2, n = a.y + a.height / 2 } return this._.dirtyT = 1, this.transform(this._.transform.concat([["r", t, r, n]])), this } }, E.translate = function (t, r) { return this.removed ? this : (t = e(t).split(u), t.length - 1 && (r = i(t[1])), t = i(t[0]) || 0, r = +r || 0, this._.bbox && (this._.bbox.x += t, this._.bbox.y += r), this.transform(this._.transform.concat([["t", t, r]])), this) }, E.scale = function (t, r, n, a) { if (this.removed) return this; if (t = e(t).split(u), t.length - 1 && (r = i(t[1]), n = i(t[2]), a = i(t[3]), isNaN(n) && (n = null), isNaN(a) && (a = null)), t = i(t[0]), null == r && (r = t), null == a && (n = a), null == n || null == a) var s = this.getBBox(1); return n = null == n ? s.x + s.width / 2 : n, a = null == a ? s.y + s.height / 2 : a, this.transform(this._.transform.concat([["s", t, r, n, a]])), this._.dirtyT = 1, this }, E.hide = function () { return !this.removed && (this.node.style.display = "none"), this }, E.show = function () { return !this.removed && (this.node.style.display = d), this }, E._getBBox = function () { return this.removed ? {} : { x: this.X + (this.bbx || 0) - this.W / 2, y: this.Y - this.H, width: this.W, height: this.H } }, E.remove = function () { if (!this.removed && this.node.parentNode) { this.paper.__set__ && this.paper.__set__.exclude(this), r.eve.unbind("raphael.*.*." + this.id), r._tear(this, this.paper), this.node.parentNode.removeChild(this.node), this.shape && this.shape.parentNode.removeChild(this.shape); for (var t in this) this[t] = "function" == typeof this[t] ? r._removedFactory(t) : null; this.removed = !0 } }, E.attr = function (e, i) { if (this.removed) return this; if (null == e) { var n = {}; for (var a in this.attrs) this.attrs[t](a) && (n[a] = this.attrs[a]); return n.gradient && "none" == n.fill && (n.fill = n.gradient) && delete n.gradient, n.transform = this._.transform, n } if (null == i && r.is(e, "string")) { if (e == h && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient; for (var s = e.split(u), o = {}, l = 0, f = s.length; f > l; l++) e = s[l], o[e] = e in this.attrs ? this.attrs[e] : r.is(this.paper.customAttributes[e], "function") ? this.paper.customAttributes[e].def : r._availableAttrs[e]; return f - 1 ? o : o[s[0]] } if (this.attrs && null == i && r.is(e, "array")) { for (o = {}, l = 0, f = e.length; f > l; l++) o[e[l]] = this.attr(e[l]); return o } var p; null != i && (p = {}, p[e] = i), null == i && r.is(e, "object") && (p = e); for (var d in p) c("raphael.attr." + d + "." + this.id, this, p[d]); if (p) { for (d in this.paper.customAttributes) if (this.paper.customAttributes[t](d) && p[t](d) && r.is(this.paper.customAttributes[d], "function")) { var g = this.paper.customAttributes[d].apply(this, [].concat(p[d])); this.attrs[d] = p[d]; for (var x in g) g[t](x) && (p[x] = g[x]) } p.text && "text" == this.type && (this.textpath.string = p.text), T(this, p) } return this }, E.toFront = function () { return !this.removed && this.node.parentNode.appendChild(this.node), this.paper && this.paper.top != this && r._tofront(this, this.paper), this }, E.toBack = function () { return this.removed ? this : (this.node.parentNode.firstChild != this.node && (this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild), r._toback(this, this.paper)), this) }, E.insertAfter = function (t) { return this.removed ? this : (t.constructor == r.st.constructor && (t = t[t.length - 1]), t.node.nextSibling ? t.node.parentNode.insertBefore(this.node, t.node.nextSibling) : t.node.parentNode.appendChild(this.node), r._insertafter(this, t, this.paper), this) }, E.insertBefore = function (t) { return this.removed ? this : (t.constructor == r.st.constructor && (t = t[0]), t.node.parentNode.insertBefore(this.node, t.node), r._insertbefore(this, t, this.paper), this) }, E.blur = function (t) { var e = this.node.runtimeStyle, i = e.filter; return i = i.replace(v, d), 0 !== +t ? (this.attrs.blur = t, e.filter = i + p + f + ".Blur(pixelradius=" + (+t || 1.5) + ")", e.margin = r.format("-{0}px 0 0 -{0}px", a(+t || 1.5))) : (e.filter = i, e.margin = 0, delete this.attrs.blur), this }, r._engine.path = function (t, e) { var r = L("shape"); r.style.cssText = m, r.coordsize = b + p + b, r.coordorigin = e.coordorigin; var i = new N(r, e), n = { fill: "none", stroke: "#000" }; t && (n.path = t), i.type = "path", i.path = [], i.Path = d, T(i, n), e.canvas.appendChild(r); var a = L("skew"); return a.on = !0, r.appendChild(a), i.skew = a, i.transform(d), i }, r._engine.rect = function (t, e, i, n, a, s) { var o = r._rectPath(e, i, n, a, s), l = t.path(o), h = l.attrs; return l.X = h.x = e, l.Y = h.y = i, l.W = h.width = n, l.H = h.height = a, h.r = s, h.path = o, l.type = "rect", l }, r._engine.ellipse = function (t, e, r, i, n) { var a = t.path(); return a.attrs, a.X = e - i, a.Y = r - n, a.W = 2 * i, a.H = 2 * n, a.type = "ellipse", T(a, { cx: e, cy: r, rx: i, ry: n }), a }, r._engine.circle = function (t, e, r, i) { var n = t.path(); return n.attrs, n.X = e - i, n.Y = r - i, n.W = n.H = 2 * i, n.type = "circle", T(n, { cx: e, cy: r, r: i }), n }, r._engine.image = function (t, e, i, n, a, s) { var o = r._rectPath(i, n, a, s), l = t.path(o).attr({ stroke: "none" }), u = l.attrs, c = l.node, f = c.getElementsByTagName(h)[0]; return u.src = e, l.X = u.x = i, l.Y = u.y = n, l.W = u.width = a, l.H = u.height = s, u.path = o, l.type = "image", f.parentNode == c && c.removeChild(f), f.rotate = !0, f.src = e, f.type = "tile", l._.fillpos = [i, n], l._.fillsize = [a, s], c.appendChild(f), B(l, 1, 1, 0, 0, 0), l }, r._engine.text = function (t, i, n, s) { var o = L("shape"), l = L("path"), h = L("textpath"); i = i || 0, n = n || 0, s = s || "", l.v = r.format("m{0},{1}l{2},{1}", a(i * b), a(n * b), a(i * b) + 1), l.textpathok = !0, h.string = e(s), h.on = !0, o.style.cssText = m, o.coordsize = b + p + b, o.coordorigin = "0 0"; var u = new N(o, t), c = { fill: "#000", stroke: "none", font: r._availableAttrs.font, text: s }; u.shape = o, u.path = l, u.textpath = h, u.type = "text", u.attrs.text = e(s), u.attrs.x = i, u.attrs.y = n, u.attrs.w = 1, u.attrs.h = 1, T(u, c), o.appendChild(h), o.appendChild(l), t.canvas.appendChild(o); var f = L("skew"); return f.on = !0, o.appendChild(f), u.skew = f, u.transform(d), u }, r._engine.setSize = function (t, e) { var i = this.canvas.style; return this.width = t, this.height = e, t == +t && (t += "px"), e == +e && (e += "px"), i.width = t, i.height = e, i.clip = "rect(0 " + t + " " + e + " 0)", this._viewBox && r._engine.setViewBox.apply(this, this._viewBox), this }, r._engine.setViewBox = function (t, e, i, n, a) { r.eve("raphael.setViewBox", this, this._viewBox, [t, e, i, n, a]); var o, l, h = this.width, u = this.height, c = 1 / s(i / h, n / u); return a && (o = u / n, l = h / i, h > i * o && (t -= (h - i * o) / 2 / o), u > n * l && (e -= (u - n * l) / 2 / l)), this._viewBox = [t, e, i, n, !!a], this._viewBoxShift = { dx: -t, dy: -e, scale: c }, this.forEach(function (t) { t.transform("...") }), this }; var L; r._engine.initWin = function (t) { var e = t.document; e.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)"); try { !e.namespaces.rvml && e.namespaces.add("rvml", "urn:schemas-microsoft-com:vml"), L = function (t) { return e.createElement("<rvml:" + t + ' class="rvml">') } } catch (r) { L = function (t) { return e.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">') } } }, r._engine.initWin(r._g.win), r._engine.create = function () { var t = r._getContainer.apply(0, arguments), e = t.container, i = t.height, n = t.width, a = t.x, s = t.y; if (!e) throw Error("VML container not found."); var o = new r._Paper, l = o.canvas = r._g.doc.createElement("div"), h = l.style; return a = a || 0, s = s || 0, n = n || 512, i = i || 342, o.width = n, o.height = i, n == +n && (n += "px"), i == +i && (i += "px"), o.coordsize = 1e3 * b + p + 1e3 * b, o.coordorigin = "0 0", o.span = r._g.doc.createElement("span"), o.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;", l.appendChild(o.span), h.cssText = r.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", n, i), 1 == e ? (r._g.doc.body.appendChild(l), h.left = a + "px", h.top = s + "px", h.position = "absolute") : e.firstChild ? e.insertBefore(l, e.firstChild) : e.appendChild(l), o.renderfix = function () { }, o }, r.prototype.clear = function () { r.eve("raphael.clear", this), this.canvas.innerHTML = d, this.span = r._g.doc.createElement("span"), this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;", this.canvas.appendChild(this.span), this.bottom = this.top = null }, r.prototype.remove = function () { r.eve("raphael.remove", this), this.canvas.parentNode.removeChild(this.canvas); for (var t in this) this[t] = "function" == typeof this[t] ? r._removedFactory(t) : null; return !0 }; var M = r.st; for (var z in E) E[t](z) && !M[t](z) && (M[z] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t].apply(r, e) }) } }(z)) } }(), T.was ? S.win.Raphael = r : Raphael = r, r
});